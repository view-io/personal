<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:classes="clr-namespace:View.Personal.Classes"
        xmlns:avalonia="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
        xmlns:helpers="clr-namespace:View.Personal.Helpers"
        xmlns:assists="clr-namespace:Material.Styles.Assists;assembly=Material.Styles"
        xmlns:controls="clr-namespace:View.Personal.Views"
        xmlns:Controls="clr-namespace:View.Personal.Controls"
        xmlns:l="clr-namespace:View.Personal.Helpers"
        x:Class="View.Personal.MainWindow"
        Width="1200" Height="800"
        Title="{l:Localize AppTitle}"
        Icon="/Assets/glyph.png">
	<!-- ReSharper disable Xaml.StyleClassNotFound -->
	<!-- ReSharper disable ObsoleteElement -->
	<Window.Resources>
		<helpers:DateTimeFormatConverter x:Key="DateTimeConverter" />
		<classes:ContainsWatchedItemsToColorConverter x:Key="WatchedColorConverter" />
		<classes:WatchedDirectoryBackgroundConverter x:Key="WatchedBackgroundConverter" />
		<helpers:ByteSizeConverter x:Key="ByteSizeConverter" />
	</Window.Resources>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="*" />
			<RowDefinition Height="5" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<!-- Onboarding Overlay -->
		<controls:OnboardingOverlay x:Name="OnboardingOverlay" Grid.Row="0" Grid.RowSpan="3" ZIndex="9999"/>
		<DockPanel>
			<Border Name="SidebarBorder" DockPanel.Dock="Left" BorderThickness="0,0,1,0" BorderBrush="#DDDDDD"
                    Width="200" Background="#FFFFFF">
				<DockPanel>
					<StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="24 32 0 24">
						<Image Source="/Assets/logo.png" Height="26" Width="97.61" />
					</StackPanel>
					<Button x:Name="StartNewChatButton"
							DockPanel.Dock="Top" Margin="12 0 12 0"
                            Click="StartNewChatButton_Click"
                            Classes="flat"
                            Width="149" Height="40">
						<StackPanel Orientation="Horizontal" Spacing="8">
							<avalonia:MaterialIcon Kind="SquareEditOutline" Foreground="#1A1C1E"
                                                   VerticalAlignment="Top"
                                                   Height="16" Width="16" />
							<TextBlock Text="{l:Localize StartNewChat}" FontWeight="400"  TextWrapping="Wrap" MaxWidth="100"/>
						</StackPanel>
					</Button>
					<ComboBox x:Name="GraphComboBox" DockPanel.Dock="Top" Margin="12 8 12 0" Width="149"
                              Theme="{StaticResource MaterialOutlineComboBox}"
                              assists:ComboBoxAssist.Label="{l:Localize Knowledgebase}"
                              Padding="12,4"
                              Background="#FFFFFF"
                              BorderBrush="#DBDBDB"
                              BorderThickness="0.97"
                              Foreground="#1A1C1E">
						<ComboBox.Styles>
							<Style Selector="ComboBox /template/ Border#PART_Border">
								<Setter Property="CornerRadius" Value="8" />
								<Setter Property="BorderBrush" Value="#DBDBDB" />
							</Style>
							<Style Selector="ComboBox /template/ Border#splitBorder">
								<Setter Property="Margin" Value="0,6" />
							</Style>
							<Style Selector="ComboBox /template/ Border#watermarkRoot">
								<Setter Property="VerticalAlignment" Value="Center" />
								<Setter Property="Margin" Value="12,0,0,0" />
							</Style>
							<Style Selector="ComboBox /template/ TextBlock#floatingWatermark">
								<Setter Property="Foreground" Value="#1A1C1E" />
							</Style>

							<Style Selector="ComboBox:focus-within /template/ Border#PART_Border">
								<Setter Property="BorderBrush" Value="#DBDBDB" />
								<Setter Property="BorderThickness" Value="0.97" />
							</Style>
							<Style Selector="ComboBoxItem">
								<Setter Property="Padding" Value="12,8" />
								<Setter Property="Background" Value="Transparent" />
								<Setter Property="Foreground" Value="#1A1C1E" />
								<Setter Property="FontSize" Value="13" />
							</Style>
							<Style Selector="ComboBox /template/ ContentPresenter">
								<Setter Property="FontSize" Value="13" />
							</Style>
							<Style Selector="ComboBoxItem:pointerover /template/ ContentPresenter">
								<Setter Property="Background" Value="#F5F5F5" />
							</Style>
							<Style Selector="ComboBox /template/ Path#arrow">
								<Setter Property="Fill" Value="#1A1C1E" />
							</Style>
						</ComboBox.Styles>
					</ComboBox>
					<StackPanel DockPanel.Dock="Top" Margin="24 0 12 0">
						<ComboBox x:Name="ChatHistoryList" DockPanel.Dock="Top" Margin="0 5 12 0" Width="149"
                              Theme="{StaticResource MaterialOutlineComboBox}"
                              assists:ComboBoxAssist.Label="{l:Localize ChatHistory}"
                              Padding="12,4"
					          Background="#FFFFFF"
					          BorderBrush="#DBDBDB"
					          BorderThickness="0.97"
                              Foreground="#1A1C1E"
                              SelectionChanged="ChatHistoryList_SelectionChanged">

							<!-- Tooltip for each item in the dropdown -->
							<ComboBox.ItemTemplate>
								<DataTemplate>
									<TextBlock Text="{Binding}" ToolTip.Tip="{Binding}" />
								</DataTemplate>
							</ComboBox.ItemTemplate>
							<ComboBox.Styles>
								<Style Selector="ComboBox /template/ Border#PART_Border">
									<Setter Property="CornerRadius" Value="8" />
									<Setter Property="BorderBrush" Value="#DBDBDB" />
								</Style>
								<Style Selector="ComboBox /template/ Border#splitBorder">
									<Setter Property="Margin" Value="0,6" />
								</Style>
								<Style Selector="ComboBox /template/ Border#watermarkRoot">
									<Setter Property="VerticalAlignment" Value="Center" />
									<Setter Property="HorizontalAlignment" Value="Center" />
									<Setter Property="Margin" Value="0" />
								</Style>
								<Style Selector="ComboBox /template/ TextBlock#floatingWatermark">
									<Setter Property="Foreground" Value="#1A1C1E" />
									<Setter Property="HorizontalAlignment" Value="Center" />
									<Setter Property="TextAlignment" Value="Center" />
								</Style>
								<Style Selector="ComboBox /template/ Popup">
									<Setter Property="Width" Value="{Binding $parent[ComboBox].Bounds.Width}" />
									<Setter Property="MaxWidth" Value="{Binding $parent[ComboBox].Bounds.Width}" />
								</Style>
								<Style Selector="ComboBox /template/ Popup > Border">
									<Setter Property="Width" Value="{Binding $parent[ComboBox].Bounds.Width}" />
									<Setter Property="MaxWidth" Value="{Binding $parent[ComboBox].Bounds.Width}" />
								</Style>

								<Style Selector="ComboBox:focus-within /template/ Border#PART_Border">
									<Setter Property="BorderBrush" Value="#DBDBDB" />
									<Setter Property="BorderThickness" Value="0.97" />
								</Style>
								<Style Selector="ComboBoxItem">
									<Setter Property="Height" Value="36" />
									<Setter Property="Padding" Value="0" />
									<Setter Property="FontSize" Value="13" />
									<Setter Property="BorderBrush" Value="#E0E0E0" />
									<Setter Property="Background" Value="#EFF7FF" />
									<Setter Property="Foreground" Value="#389CFF" />
									<Setter Property="CornerRadius" Value="0" />
									<Setter Property="BorderThickness" Value="0,0,0,1" />
									<Setter Property="HorizontalContentAlignment" Value="Left" />
									<Setter Property="VerticalContentAlignment" Value="Center" />
									<Setter Property="Template">
										<ControlTemplate>
											<Border Background="{TemplateBinding Background}"
													BorderBrush="{TemplateBinding BorderBrush}"
													BorderThickness="{TemplateBinding BorderThickness}"
													CornerRadius="0">
												<ContentPresenter
													Content="{TemplateBinding Content}"
												Margin="{TemplateBinding Padding}"
												HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
												VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
												Foreground="{TemplateBinding Foreground}" />
											</Border>
										</ControlTemplate>
									</Setter>
								</Style>
								<Style Selector="ComboBox /template/ ContentPresenter">
									<Setter Property="FontSize" Value="13" />
									<Setter Property="VerticalAlignment" Value="Center" />
									<Setter Property="HorizontalAlignment" Value="Center" />
								</Style>
								<Style Selector="ComboBox /template/ Path#arrow">
									<Setter Property="Fill" Value="#1A1C1E" />
								</Style>
								<Style Selector="ComboBox /template/ Popup > Border">
									<Setter Property="Width" Value="{Binding $parent[ComboBox].Bounds.Width}" />
									<Setter Property="MaxWidth" Value="{Binding $parent[ComboBox].Bounds.Width}" />
									<Setter Property="CornerRadius" Value="0" />
									<Setter Property="Background" Value="#FFFFFF" />
									<Setter Property="BorderBrush" Value="#CCCCCC" />
									<Setter Property="BorderThickness" Value="1" />
								</Style>
								<Style Selector="ComboBoxItem:selected">
									<Setter Property="Background" Value="#DDE6ED" />
									<Setter Property="Foreground" Value="#389CFF" />
									<Setter Property="BorderBrush" Value="#C5D3E0" />
									<Setter Property="BorderThickness" Value="1" />
									<Setter Property="FontWeight" Value="Normal"/>
								</Style>
							</ComboBox.Styles>
						</ComboBox>
					</StackPanel>
					<ListBox DockPanel.Dock="Bottom" x:Name="NavList" SelectionChanged="NavList_SelectionChanged"
                             Margin="16 0 16 32">
						<ListBoxItem Tag="Files">
							<StackPanel Orientation="Horizontal" Spacing="10">
								<avalonia:MaterialIcon Kind="FileOutline" Foreground="#6A6B6F"
                                                       Height="18" Width="18" />
								<TextBlock Text="{l:Localize Files}" Foreground="#6A6B6F" />
							</StackPanel>
						</ListBoxItem>
						<ListBoxItem Tag="Data Monitor">
							<StackPanel Orientation="Horizontal" Spacing="10">
								<avalonia:MaterialIcon Kind="ArrangeBringToFront" Foreground="#6A6B6F"

                                                       Height="18" Width="18" />
								<TextBlock Text="{l:Localize DataMonitor}" Foreground="#6A6B6F" />
							</StackPanel>
						</ListBoxItem>
						<ListBoxItem Tag="Settings2" x:Name="SettingsPanel">
							<StackPanel Orientation="Horizontal" Spacing="10">
								<avalonia:MaterialIcon Kind="CogOutline" Foreground="#6A6B6F"

                                                       Height="18" Width="18" />
								<TextBlock Text="{l:Localize Settings}" Foreground="#6A6B6F" />
							</StackPanel>
						</ListBoxItem>
						<ListBoxItem Tag="Console">
							<StackPanel Orientation="Horizontal" Spacing="10">
								<avalonia:MaterialIcon Kind="Console" Foreground="#6A6B6F"
                                                       Height="18" Width="18" />
								<TextBlock Text="{l:Localize Console}" Foreground="#6A6B6F" />
							</StackPanel>
						</ListBoxItem>
					</ListBox>
					<StackPanel />
				</DockPanel>
			</Border>
			<Grid Name="MainContentArea" Background="#F5F5F5">
				<Border Name="DashboardPanel" Background="White" CornerRadius="8" Padding="20 24 20 16"
                        HorizontalAlignment="Center" VerticalAlignment="Center" IsVisible="True" Width="454"
                        Height="601" BoxShadow="0 2 4 -2 #1A1C1E 6%, 0 4 8 -2 #1A1C1E 10%">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto" />
							<RowDefinition Height="*" />
							<RowDefinition Height="Auto" />
						</Grid.RowDefinitions>
						<StackPanel Grid.Row="0" Orientation="Horizontal" Spacing="10">
							<TextBlock Text="{l:Localize WelcomeToView}" FontSize="45" Classes="default" />
						</StackPanel>
						<StackPanel Grid.Row="1" Spacing="30" Margin="0,20,0,0">
							<StackPanel Orientation="Horizontal" Spacing="16">
								<avalonia:MaterialIcon Kind="FileDocumentOutline" Foreground="#009E61"
                                                       VerticalAlignment="Top"
                                                       Height="24" Width="24" />
								<StackPanel>
									<TextBlock Text="{l:Localize Files}" Classes="default"
                                               Margin="0" Padding="0" FontWeight="500" />
									<TextBlock Classes="secondary" Text="{l:Localize ManageFiles}" />
								</StackPanel>
							</StackPanel>
							<StackPanel Orientation="Horizontal" Spacing="16">
								<avalonia:MaterialIcon Kind="ArrangeBringToFront" Foreground="#FF6D00"
                                                       VerticalAlignment="Top"
                                                       Height="24" Width="24" />
								<StackPanel>
									<TextBlock Text="{l:Localize DataMonitor}" Classes="default"
                                               Margin="0" Padding="0" FontWeight="500" />
									<TextBlock Classes="secondary" Text="{l:Localize MonitorFiles}" />
								</StackPanel>
							</StackPanel>
							<StackPanel Orientation="Horizontal" Spacing="16">
								<avalonia:MaterialIcon Kind="CogOutline" Foreground="#0472EF" VerticalAlignment="Top"
                                                       Height="24" Width="24" />
								<StackPanel>
									<TextBlock Text="{l:Localize Settings}" Classes="default"
                                               Margin="0" Padding="0" FontWeight="500" />
									<TextBlock Classes="secondary" Text="{l:Localize ConfigureLLM}" />
								</StackPanel>
							</StackPanel>
							<StackPanel Orientation="Horizontal" Spacing="16">
								<avalonia:MaterialIcon Kind="MessageProcessingOutline" Foreground="#7B45E6"
                                                       VerticalAlignment="Top" Height="24" Width="24" />
								<StackPanel>
									<TextBlock Text="{l:Localize Chat}" Classes="default"
                                               Margin="0" Padding="0" FontWeight="500" />
									<TextBlock Classes="secondary" Text="{l:Localize ChatWithData}" />
								</StackPanel>
							</StackPanel>
						</StackPanel>
						<Grid Grid.Row="2" VerticalAlignment="Bottom" Margin="0,10,0,0">
							<TextBlock Text="{l:Localize Copyright}" FontSize="12" Foreground="#6A6B6F"
                                       FontWeight="500" />
						</Grid>
					</Grid>
				</Border>
				<Grid x:Name="DataMonitorPanel" Margin="20" IsVisible="False">
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto"/>
						<RowDefinition Height="*"/>
					</Grid.RowDefinitions>
					<StackPanel Grid.Row="0" Spacing="12" Margin="0, 20, 0, 0">
						<TextBlock Text="{l:Localize DataMonitorTitle}" Foreground="#1A1C1E" FontWeight="500" FontSize="16" />
						<Border BorderThickness="0,0,0,1" BorderBrush="#EAECF0" Margin="0,0,0,8" />
					</StackPanel>

					<Grid Grid.Row="1" RowDefinitions="Auto,*" Margin="0,20,0,0">
						<Grid Grid.Row="0" ColumnDefinitions="Auto,*,Auto" Margin="8,0,0,12" VerticalAlignment="Center">
							<Button x:Name="NavigateUpButton" Grid.Column="0" Click="NavigateUpButton_Click"
                                    Classes="flat" Height="30">
								<avalonia:MaterialIcon Kind="ArrowBack" Height="16" Width="16" />
							</Button>
							<TextBox x:Name="CurrentPathTextBox" Grid.Column="1" KeyDown="CurrentPathTextBox_KeyDown"
                                     Classes="no-shadow" Margin="8,0" Watermark="{l:Localize EnterPathToNavigate}"
                                     BorderBrush="#DBDBDB" BorderThickness="0.97" CornerRadius="8" Padding="8,0" />
							<Button x:Name="SyncButton" Grid.Column="2" Content="{l:Localize Sync}" Click="SyncButton_Click"
                                    HorizontalAlignment="Right" Margin="0,0,8,0" Classes="flat" />
						</Grid>

						<DataGrid Grid.Row="1" x:Name="FileSystemDataGrid" AutoGenerateColumns="False" IsReadOnly="True"
								  CanUserReorderColumns="False" CanUserResizeColumns="False"
								  GridLinesVisibility="Horizontal" Background="#FFFFFF"
								  HorizontalGridLinesBrush="#EDEDED" BorderThickness="1" BorderBrush="#EDEDED"
								  DoubleTapped="FileSystemDataGrid_DoubleTapped"
								  x:DataType="classes:FileSystemEntry" VerticalScrollBarVisibility="Visible">
							<DataGrid.Styles>
								<Style Selector="DataGridColumnHeader">
									<Setter Property="Background" Value="#FAFAFA" />
									<Setter Property="Foreground" Value="#1A1C1E" />
									<Setter Property="FontWeight" Value="500" />
									<Setter Property="FontSize" Value="14.5" />
									<Setter Property="Padding" Value="12 0 8 0" />
									<Setter Property="MinHeight" Value="24" />
									<Setter Property="Height" Value="38" />
								</Style>
								<Style Selector="DataGridRow">
									<Setter Property="MinHeight" Value="24" />
									<Setter Property="Height" Value="38" />
									<Setter Property="BorderBrush" Value="#EDEDED" />
									<Setter Property="BorderThickness" Value="0,0,0,1" />
									<Setter Property="Background">
										<Setter.Value>
											<MultiBinding Converter="{StaticResource WatchedBackgroundConverter}">
												<Binding Path="IsDirectory" />
												<Binding Path="ContainsWatchedItems" />
												<Binding Path="IsWatchedOrInherited" />
											</MultiBinding>
										</Setter.Value>
									</Setter>
								</Style>
							</DataGrid.Styles>
							<DataGrid.Columns>
								<DataGridTemplateColumn Header="{l:Localize Sync}" Width="60">
									<DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<!-- ReSharper disable once Xaml.BindingWithContextNotResolved -->
											<!-- ReSharper disable Xaml.BindingWithContextNotResolved -->
											<CheckBox IsChecked="{Binding IsWatched, Mode=TwoWay}"
													  IsEnabled="{Binding IsCheckBoxEnabled}"
													  VerticalAlignment="Center" HorizontalAlignment="Center"
													  Checked="WatchCheckBox_Checked"
													  Unchecked="WatchCheckBox_Unchecked"
													  Width="16" Height="16" />
											<!-- ReSharper restore Xaml.BindingWithContextNotResolved -->
										</DataTemplate>
									</DataGridTemplateColumn.CellTemplate>
								</DataGridTemplateColumn>
								<DataGridTemplateColumn Header="{l:Localize Type}" Width="60">
									<DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<!-- ReSharper disable Xaml.BindingWithContextNotResolved -->
											<avalonia:MaterialIcon Kind="{Binding IconKind}" Width="16" Height="16"
																   VerticalAlignment="Center"
																   HorizontalAlignment="Center">
												<!-- ReSharper restore Xaml.BindingWithContextNotResolved -->
												<avalonia:MaterialIcon.Foreground>
													<MultiBinding
														Converter="{StaticResource WatchedColorConverter}">
														<!-- ReSharper disable Xaml.BindingWithContextNotResolved -->
														<Binding Path="ContainsWatchedItems" />
														<Binding Path="IsSelectedWatchedDirectory" />
													</MultiBinding>
												</avalonia:MaterialIcon.Foreground>
											</avalonia:MaterialIcon>
										</DataTemplate>
									</DataGridTemplateColumn.CellTemplate>
								</DataGridTemplateColumn>
								<DataGridTextColumn Header="{l:Localize Name}" Binding="{Binding Name}" Width="300" />
								<DataGridTextColumn Header="{l:Localize Size}" Binding="{Binding Size}" Width="120" />
								<DataGridTextColumn Header="{l:Localize LastModified}" Binding="{Binding LastModified}"
													Width="200" />
								<DataGridTemplateColumn Header="{l:Localize Watching}" Width="100">
									<DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<avalonia:MaterialIcon Kind="EyeOutline" Width="16" Height="16"
																   Foreground="#0472EF"
																   IsVisible="{Binding IsWatchedOrInherited}"
																   VerticalAlignment="Center"
																   HorizontalAlignment="Center"
																   ToolTip.Tip="{l:Localize ItemIsBeingWatched}" />
										</DataTemplate>
									</DataGridTemplateColumn.CellTemplate>
								</DataGridTemplateColumn>
							</DataGrid.Columns>
						</DataGrid>
					</Grid>
				</Grid>
				<Grid Name="SettingsPanel2" RowDefinitions="Auto,*" Margin="40,20,40,20" IsVisible="False">
					<StackPanel Spacing="12" Grid.Row="0" Margin="0, 20, 0, 0">
						<TextBlock Text="{l:Localize Settings}" Foreground="#1A1C1E" FontWeight="500" FontSize="16" />
						<Border BorderThickness="0,0,0,1" BorderBrush="#EAECF0" Margin="0,0,0,12" />
					</StackPanel>
					<TabControl Margin="0,0,0,0" Grid.Row="1">
						<TabControl.Template>
							<ControlTemplate TargetType="TabControl">
								<DockPanel>
									<Grid DockPanel.Dock="Top" RowDefinitions="40,*">
										<ItemsPresenter Name="PART_ItemsPresenter"
                                                        Grid.Row="0"
                                                        ItemsPanel="{TemplateBinding ItemsPanel}"
                                                        Margin="0" />
										<Border Grid.Row="0"
                                                VerticalAlignment="Bottom"
                                                Margin="0,0,0,-1"
                                                BorderThickness="0,0,0,1"
                                                BorderBrush="#EAECF0" />
									</Grid>
									<ContentPresenter Name="PART_SelectedContentHost"
                                                      Margin="0,12,0,0"
                                                      HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                      VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                                      Content="{TemplateBinding SelectedContent}"
                                                      ContentTemplate="{TemplateBinding SelectedContentTemplate}" />
								</DockPanel>
							</ControlTemplate>
						</TabControl.Template>
						<TabControl.ItemsPanel>
							<ItemsPanelTemplate>
								<StackPanel Orientation="Horizontal" Spacing="18" Margin="0" />
							</ItemsPanelTemplate>
						</TabControl.ItemsPanel>
						<TabControl.Styles>
							<Style Selector="TabItem">
								<Setter Property="FontSize" Value="14" />
								<Setter Property="Height" Value="40" />
								<Setter Property="VerticalContentAlignment" Value="Center" />
								<Setter Property="HorizontalContentAlignment" Value="Left" />
								<Setter Property="HorizontalAlignment" Value="Left" />
								<Setter Property="MinWidth" Value="0" />
								<Setter Property="Margin" Value="0" />
								<Setter Property="Padding" Value="0" />
								<Setter Property="BorderThickness" Value="0" />
								<Setter Property="Background" Value="Transparent" />
								<Setter Property="Template">
									<ControlTemplate>
										<Border Name="PART_Border"
                                                Height="{TemplateBinding Height}"
                                                HorizontalAlignment="Left"
                                                BorderThickness="0,0,0,1"
                                                BorderBrush="Transparent"
                                                Background="Transparent">
											<ContentPresenter Name="PART_ContentPresenter"
                                                              ContentTemplate="{TemplateBinding HeaderTemplate}"
                                                              Content="{TemplateBinding Header}"
                                                              HorizontalAlignment="Left"
                                                              VerticalAlignment="Center"
                                                              Margin="0" />
										</Border>
									</ControlTemplate>
								</Setter>
							</Style>
							<Style Selector="TabItem:selected">
								<Setter Property="Foreground" Value="#1A1C1E" />
								<Setter Property="FontWeight" Value="500" />
								<Setter Property="Template">
									<ControlTemplate>
										<Border Name="PART_SelectedPipe"
                                                Height="{TemplateBinding Height}"
                                                HorizontalAlignment="Left"
                                                BorderThickness="0,0,0,1"
                                                BorderBrush="#1A1C1E"
                                                Background="Transparent">
											<ContentPresenter Name="PART_ContentPresenter"
                                                              ContentTemplate="{TemplateBinding HeaderTemplate}"
                                                              Content="{TemplateBinding Header}"
                                                              HorizontalAlignment="Left"
                                                              VerticalAlignment="Center"
                                                              Margin="0" />
										</Border>
									</ControlTemplate>
								</Setter>
							</Style>
							<Style Selector="TabControl StackPanel">
								<Setter Property="Background" Value="Transparent" />
								<Setter Property="Margin" Value="0" />
							</Style>
							<Style Selector="TextBox">
								<Setter Property="CornerRadius" Value="8" />
								<Setter Property="Height" Value="36" />
								<Setter Property="BorderBrush" Value="#DBDBDB" />
								<Setter Property="BorderThickness" Value="1" />
								<Setter Property="Background" Value="#FAFAFA" />
								<Setter Property="FontSize" Value="14" />
								<Setter Property="Foreground" Value="#6A6B6F" />
								<Setter Property="Padding" Value="10,8,10,10" />
								<Setter Property="SelectionBrush" Value="#0472EF" />
								<Setter Property="SelectionForegroundBrush" Value="White" />
								<Setter Property="Cursor" Value="IBeam" />
								<Setter Property="Template">
									<ControlTemplate>
										<Border Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                CornerRadius="{TemplateBinding CornerRadius}">
											<ScrollViewer Name="PART_ContentHost"
                                                          Padding="{TemplateBinding Padding}"
                                                          HorizontalAlignment="Stretch"
                                                          VerticalAlignment="Stretch">
												<TextPresenter Name="PART_TextPresenter"
                                                               Text="{TemplateBinding Text, Mode=TwoWay}"
                                                               CaretIndex="{TemplateBinding CaretIndex, Mode=TwoWay}"
                                                               SelectionStart="{TemplateBinding SelectionStart, Mode=TwoWay}"
                                                               SelectionEnd="{TemplateBinding SelectionEnd, Mode=TwoWay}"
                                                               SelectionBrush="{TemplateBinding SelectionBrush}"
                                                               SelectionForegroundBrush="{TemplateBinding SelectionForegroundBrush}"
                                                               TextWrapping="{TemplateBinding TextWrapping}"
                                                               PasswordChar="{TemplateBinding PasswordChar}"
                                                               RevealPassword="{TemplateBinding RevealPassword}" />
											</ScrollViewer>
										</Border>
									</ControlTemplate>
								</Setter>
							</Style>
							<Style Selector="RadioButton">
								<Setter Property="VerticalAlignment" Value="Center" />
								<Setter Property="BorderBrush" Value="#6A6B6F" />
								<Setter Property="Foreground" Value="#1A1C1E" />
								<Setter Property="Template">
									<ControlTemplate>
										<Grid ColumnDefinitions="Auto,*">
											<Grid Width="16" Height="16" VerticalAlignment="Center">
												<Ellipse x:Name="PART_OuterCircle"
                                                     Width="12" Height="12"
                                                     Stroke="{TemplateBinding BorderBrush}"
                                                     StrokeThickness="1"
                                                     Fill="Transparent" />
												<Ellipse x:Name="PART_InnerCircle"
                                                     Width="6" Height="6"
                                                     Fill="{TemplateBinding Foreground}"
                                                     IsVisible="{TemplateBinding IsChecked}" />
											</Grid>
											<ContentPresenter Grid.Column="1"
                                                  Content="{TemplateBinding Content}"
                                                  ContentTemplate="{TemplateBinding ContentTemplate}"
                                                  VerticalAlignment="Center"
                                                  Margin="4,0,0,0" />
										</Grid>
									</ControlTemplate>
								</Setter>
							</Style>
						</TabControl.Styles>
						<TabItem Header="{l:Localize Knowledgebases}">
							<Border Padding="0,20,0,0">
								<StackPanel Orientation="Vertical" Spacing="10">
									<StackPanel Orientation="Horizontal" Spacing="10">
										<Button Click="CreateGraphButton_Click" Classes="flat">
											<StackPanel Orientation="Horizontal" Spacing="8">
												<avalonia:MaterialIcon Kind="Plus" Height="16" Width="16" />
												<TextBlock Text="{l:Localize NewKnowledgebase}" Foreground="#1A1C1E"
                                                           FontWeight="400" />
											</StackPanel>
										</Button>
										<Button Click="ExportGexfButton_Click" Classes="flat" ToolTip.Tip="{l:Localize ExportToGEXF}">
											<avalonia:MaterialIcon Kind="TrayArrowDown" />
										</Button>
									</StackPanel>
									<DataGrid x:Name="GraphsDataGrid" AutoGenerateColumns="False" IsReadOnly="True"
                                              CanUserReorderColumns="False" CanUserResizeColumns="True"
                                              GridLinesVisibility="Horizontal" Background="#FFFFFF"
                                              HorizontalGridLinesBrush="#EDEDED" BorderThickness="1"
                                              BorderBrush="#EDEDED">
										<DataGrid.Columns>
											<DataGridTextColumn Header="{l:Localize Name}" Binding="{Binding Name}" Width="200" />
											<DataGridTextColumn Header="{l:Localize GUID}" Binding="{Binding GUID}" Width="300" />
											<DataGridTextColumn Header="{l:Localize Nodes}" Binding="{Binding Nodes}" Width="80" />
											<DataGridTextColumn Header="{l:Localize Created}"
                                                                Binding="{Binding CreatedUtc, Converter={StaticResource DateTimeConverter}, Mode=OneWay}"
                                                                Width="150" />
											<DataGridTextColumn Header="{l:Localize LastUpdate}"
                                                                Binding="{Binding LastUpdateUtc, Converter={StaticResource DateTimeConverter}, Mode=OneWay}"
                                                                Width="150" />
											<DataGridTemplateColumn Header="" Width="150">
												<DataGridTemplateColumn.CellTemplate>
													<DataTemplate>
														<Grid HorizontalAlignment="Center" VerticalAlignment="Center">
															<Button Click="RemoveGraph_Click"
												Tag="{Binding}"
												Content="{l:Localize Remove}"
												ToolTip.Tip="{l:Localize DeleteKnowledgebaseTooltip}"
												Foreground="#6A6B6F"
												Background="Transparent"
																	BorderThickness="0"
																	Padding="0"
																	Cursor="Hand"
																	HorizontalAlignment="Center"
																	VerticalAlignment="Center">
																<Button.Template>
																	<ControlTemplate TargetType="Button">
																		<ContentPresenter
																			Content="{TemplateBinding Content}"
																			ContentTemplate="{TemplateBinding ContentTemplate}"
																			Padding="{TemplateBinding Padding}"
																			HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
																			VerticalAlignment="{TemplateBinding VerticalAlignment}"
																			Background="Transparent" />
																	</ControlTemplate>
																</Button.Template>
																<Button.Styles>
																	<Style Selector="Button:pointerover">
																		<Setter Property="Foreground" Value="#6A6B6F" />
																	</Style>
																	<Style Selector="Button:pressed">
																		<Setter Property="Foreground" Value="#6A6B6F" />
																	</Style>
																</Button.Styles>
															</Button>
														</Grid>
													</DataTemplate>
												</DataGridTemplateColumn.CellTemplate>
											</DataGridTemplateColumn>

										</DataGrid.Columns>
									</DataGrid>
								</StackPanel>
							</Border>
						</TabItem>
						<TabItem Header="{l:Localize Providers}" IsSelected="True">
							<Border Padding="0,0,0,0">
								<Grid RowDefinitions="*,Auto">
									<ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Hidden" HorizontalScrollBarVisibility="Disabled">
										<StackPanel Orientation="Vertical" Spacing="20" Margin="0,20,20,0">

											<Grid ColumnDefinitions="240,*" RowDefinitions="Auto" Margin="0,0,0,16">
												<!-- Left column: Provider description -->
												<StackPanel Grid.Column="0" Orientation="Vertical" Spacing="4">
													<TextBlock Text="{l:Localize OpenAIProvider}" FontWeight="500" FontSize="14"
															   Foreground="#1A1C1E" VerticalAlignment="Top" />
													<TextBlock FontSize="12" Foreground="#6A6B6F" TextWrapping="Wrap" Text="{l:Localize GainAccessToOpenAI}" />
												</StackPanel>
												<Expander x:Name="OpenAIExpander" Grid.Column="1" IsExpanded="False"
														  ExpandDirection="Down" BorderThickness="0" Margin="0,-10,0,0"
														  Padding="0" Background="#F5F5F5">
													<Expander.Header>
														<Grid ColumnDefinitions="Auto,*">
															<RadioButton Grid.Column="0" GroupName="CompletionProvider"
																		 x:Name="OpenAICompletionProvider"
																		 VerticalAlignment="Center" />
															<TextBlock Grid.Column="1" Text="{l:Localize OpenAISettings}"
																	   VerticalAlignment="Center"
																	   HorizontalAlignment="Center" FontWeight="500"
																	   FontSize="13" />
														</Grid>
													</Expander.Header>
													<StackPanel Margin="0,10,0,10" Spacing="8">
														<TextBlock Text="{l:Localize OpenAIApiKey}" Padding="8,0,0,0"
															   VerticalAlignment="Center" Margin="0,0,16,0"
															   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="OpenAIApiKey" Text="{l:Localize YourApiKeyHerePlaceholder}" Margin="8,0,8,0" Classes="no-shadow" ToolTip.Tip="{l:Localize EnterOpenAIApiKeyTooltip}" />
														<TextBlock Text="{l:Localize OpenAICompletionModel}" Padding="8,0,0,0"
															   VerticalAlignment="Center" Margin="0,0,16,0"
															   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="OpenAICompletionModel" Classes="no-shadow"
																 Text="gpt-3.5-turbo"
																 Margin="8,0,8,0"
																 ToolTip.Tip="{l:Localize SpecifyOpenAIModelTooltip}" />
														<TextBlock Text="{l:Localize SystemPrompt}" Padding="8,0,0,0"
															   VerticalAlignment="Center" Margin="0,0,16,0"
															   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="OpenAISystemPrompt"
																 Text=""
																 Margin="8,0,8,0"
																 Height="80"
																 TextWrapping="Wrap"
																 AcceptsReturn="True"
																 VerticalContentAlignment="Top"
																 ToolTip.Tip="{l:Localize EnterCustomSystemPrompt}" />
														<TextBlock Text="{l:Localize OpenAIEndpoint}" Padding="8,0,0,0"
															   VerticalAlignment="Center" Margin="0,0,16,0"
															   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="OpenAIEndpoint"
																 Classes="no-shadow"
																 Text="https://api.openai.com/v1/chat/completions"
																 Margin="8,0,8,0"
																 ToolTip.Tip="{l:Localize SetOpenAIEndpointTooltip}" />
														<Grid ColumnDefinitions="*,*" Margin="8,0,8,0">
															<StackPanel Grid.Column="0" Spacing="4" Margin="0,0,4,0">
																<TextBlock Text="{l:Localize BatchSize}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="OpenAIBatchSize" Classes="no-shadow"
																		 ToolTip.Tip="{l:Localize OpenAIBatchSizeTooltip}" />
															</StackPanel>
															<StackPanel Grid.Column="1" Spacing="4" Margin="4,0,0,0">
																<TextBlock Text="{l:Localize MaxRetries}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="OpenAIMaxRetries" Classes="no-shadow"
																		 ToolTip.Tip="{l:Localize OpenAIMaxRetriesTooltip}" />
															</StackPanel>
														</Grid>
														<StackPanel Spacing="4" Margin="8,0,8,0" Height="45">
															<Grid ColumnDefinitions="*,Auto" Margin="0,5,0,0">
																<TextBlock Grid.Column="0" Text="{l:Localize Temperature}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																<TextBlock Grid.Column="1" x:Name="OpenAITemperatureValue" Text="0.7" FontSize="12" Foreground="#6A6B6F" />
															</Grid>
															<Grid Margin="0,5,0,0">
																<Slider x:Name="OpenAITemperature" Margin="12,0" Minimum="0" Maximum="1" Value="0.7" TickFrequency="0.1" IsSnapToTickEnabled="True"
																		ToolTip.Tip="{l:Localize OpenAITemperatureTooltip}" />
															</Grid>
														</StackPanel>

														<!-- RAG Settings -->
														<Border BorderBrush="#EAECF0" BorderThickness="0,1,0,0" Margin="8,8,8,8" Padding="0,8,0,0">
															<StackPanel Spacing="8">
																<!-- Row 1: Toggle Button only -->
																<Grid ColumnDefinitions="*,Auto">
																	<CheckBox Grid.Column="0" x:Name="OpenAIEnableRAG" Content="{l:Localize EnableRAG}"
															  ToolTip.Tip="{l:Localize EnableRAGTooltip}"
															  HorizontalAlignment="Left" Margin="0,0,0,8" />

																	<Button Grid.Column="1" x:Name="OpenAIAdvancedRagButton"
																			Classes="flat"
																			IsEnabled="{Binding IsChecked, ElementName=OpenAIEnableRAG}"
																			ToolTip.Tip="{l:Localize ConfigureAdvancedRAGTooltip}"
																			VerticalAlignment="Bottom"
																			Height="41">
																		<StackPanel Orientation="Horizontal" Spacing="8">
																			<avalonia:MaterialIcon Kind="CogOutline" VerticalAlignment="Center" Width="16" Height="16" />
																			<TextBlock Text="{l:Localize AdvancedSettings}" Foreground="#1A1C1E" FontWeight="400" />
																		</StackPanel>
																		<Button.Flyout>
																			<Flyout Placement="Right">
																				<Border Background="White" BorderBrush="#DBDBDB" BorderThickness="1" CornerRadius="8" Padding="16" Width="350">
																					<StackPanel Spacing="16">
																						<TextBlock Text="{l:Localize AdvancedSettings}" FontSize="14" FontWeight="500" Foreground="#1A1C1E" />

																						<!-- Max retrieved slider -->
																						<StackPanel Spacing="4">
																							<Grid ColumnDefinitions="*,Auto">
																								<TextBlock Grid.Column="0" Text="{l:Localize MaxRetrieved}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																								<TextBlock Grid.Column="1" x:Name="OpenAIMaxRetrievedValue" Text="10" FontSize="12" Foreground="#6A6B6F" />
																							</Grid>
																							<Slider x:Name="OpenAIMaxRetrieved" Minimum="1" Maximum="20" Value="10" TickFrequency="1" IsSnapToTickEnabled="True"
																									ToolTip.Tip="{l:Localize MaxRetrievedTooltip}" />
																						</StackPanel>



																						<!-- Query optimization toggle -->
																						<Grid ColumnDefinitions="*,Auto">
																							<TextBlock Grid.Column="0" Text="{l:Localize QueryOptimization}" FontSize="12" Foreground="#1A1C1E" FontWeight="500"
																   ToolTip.Tip="{l:Localize QueryOptimizationTooltip}" />
																							<ToggleSwitch Grid.Column="1" x:Name="OpenAIQueryOptimization" IsChecked="True" OnContent="" OffContent="" />
																						</Grid>
																						<!-- Enable citations toggle -->
																						<Grid ColumnDefinitions="*,Auto">
																							<TextBlock Grid.Column="0" Text="{l:Localize EnableCitations}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" ToolTip.Tip="{l:Localize EnableCitationsTooltip}" />
																							<ToggleSwitch Grid.Column="1" x:Name="OpenAIEnableCitations" IsChecked="False" OnContent="" OffContent="" />
																						</Grid>


																						<!-- Enable context sorting toggle -->
																						<Grid ColumnDefinitions="*,Auto">
																							<TextBlock Grid.Column="0" Text="{l:Localize EnableContextSorting}" FontSize="12" Foreground="#1A1C1E" FontWeight="500"
																									   ToolTip.Tip="{l:Localize EnableContextSortingTooltip}" />
																							<ToggleSwitch Grid.Column="1" x:Name="OpenAIEnableContextSorting" IsChecked="False" OnContent="" OffContent="" />
																						</Grid>

																					</StackPanel>
																				</Border>
																			</Flyout>
																		</Button.Flyout>
																	</Button>
																</Grid>

																<StackPanel x:Name="OpenAIRagSettingsPanel" Spacing="8" IsVisible="{Binding IsChecked, ElementName=OpenAIEnableRAG}">
																	<!-- Knowledgebase Source Dropdown -->
																	<StackPanel Spacing="4" Margin="0,0,0,8" >
																		<TextBlock Text="{l:Localize KnowledgebaseSource}"
													   FontSize="12"
													   Foreground="#1A1C1E"
													   FontWeight="500" />
																		<ComboBox x:Name="OpenAIKnowledgeSource"
																				  Width="300"
																				  Theme="{StaticResource MaterialOutlineComboBox}"
																				  assists:ComboBoxAssist.Label=""
																				  Padding="12, 4"
																				  Background="#FFFFFF"
																				  BorderBrush="#DBDBDB"
																				  BorderThickness="0.97"
																				  Foreground="#1A1C1E"
																				  HorizontalAlignment="Left">
																			<ComboBox.Styles>
																				<Style Selector="ComboBox /template/ Grid#PART_RootBorder">
																					<Setter Property="MinHeight" Value="36" />
																					<Setter Property="Margin" Value="0,0,0,0" />
																				</Style>
																				<Style Selector="ComboBox /template/ Border#PART_Border">
																					<Setter Property="CornerRadius" Value="8" />
																					<Setter Property="BorderBrush" Value="#DBDBDB" />
																				</Style>
																				<Style Selector="ComboBox /template/ Border#splitBorder">
																					<Setter Property="Margin" Value="0,6" />
																				</Style>
																				<Style Selector="ComboBox /template/ Border#watermarkRoot">
																					<Setter Property="VerticalAlignment" Value="Center" />
																					<Setter Property="Margin" Value="12,0,0,0" />
																				</Style>
																				<Style Selector="ComboBox /template/ TextBlock#floatingWatermark">
																					<Setter Property="Foreground" Value="#1A1C1E" />
																				</Style>

																				<Style Selector="ComboBox:focus-within /template/ Border#PART_Border">
																					<Setter Property="BorderBrush" Value="#DBDBDB" />
																					<Setter Property="BorderThickness" Value="0.97" />
																				</Style>
																				<Style Selector="ComboBoxItem">
																					<Setter Property="Padding" Value="12,8" />
																					<Setter Property="Background" Value="Transparent" />
																					<Setter Property="Foreground" Value="#1A1C1E" />
																					<Setter Property="FontSize" Value="13" />
																				</Style>
																				<Style Selector="ComboBox /template/ ContentPresenter">
																					<Setter Property="FontSize" Value="13" />
																				</Style>
																				<Style Selector="ComboBoxItem:pointerover /template/ ContentPresenter">
																					<Setter Property="Background" Value="#F5F5F5" />
																				</Style>
																				<Style Selector="ComboBox /template/ Path#arrow">
																					<Setter Property="Fill" Value="#1A1C1E" />
																				</Style>
																			</ComboBox.Styles>
																		</ComboBox>
																	</StackPanel>
																	<!-- Row 3: Top-K and Threshold in same row -->
																	<Grid ColumnDefinitions="*,*" Margin="0,4,0,0">
																		<StackPanel Grid.Column="0" Spacing="4" Margin="4,0,0,0">
																			<Grid ColumnDefinitions="*,Auto">
																				<TextBlock Grid.Column="0" Text="{l:Localize SimilarityThreshold}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																				<TextBlock Grid.Column="1" x:Name="OpenAISimilarityThresholdValue" Text="0.7" FontSize="12" Foreground="#6A6B6F" />
																			</Grid>
																			<Grid Margin="0,15,0,0">
																				<Slider x:Name="OpenAISimilarityThreshold" Margin="12,0" Minimum="0" Maximum="1" Value="0.7" TickFrequency="0.1" IsSnapToTickEnabled="True"
																						ToolTip.Tip="{l:Localize SimilarityThresholdTooltip}" />
																			</Grid>
																		</StackPanel>
																	</Grid>
																</StackPanel>
															</StackPanel>
														</Border>
													</StackPanel>
												</Expander>
											</Grid>
											<Grid ColumnDefinitions="240,*" RowDefinitions="Auto" Margin="0,0,0,16">
												<StackPanel Grid.Column="0" Orientation="Vertical" Spacing="4">
													<TextBlock Text="{l:Localize AnthropicProvider}" FontWeight="500" FontSize="14"
									                           Foreground="#1A1C1E" VerticalAlignment="Top" />
													<TextBlock FontSize="12" Foreground="#6A6B6F" TextWrapping="Wrap" Text="{l:Localize GainAccessToAnthropic}" />
												</StackPanel>
												<Expander x:Name="AnthropicExpander" Grid.Column="1" IsExpanded="False"
														  ExpandDirection="Down" BorderThickness="0" Margin="0,-10,0,0"
														  Padding="0" Background="#F5F5F5">
													<Expander.Header>
														<Grid ColumnDefinitions="Auto,*">
															<RadioButton Grid.Column="0" GroupName="CompletionProvider"
																		 x:Name="AnthropicCompletionProvider"
																		 VerticalAlignment="Center" />
															<TextBlock Grid.Column="1" Text="{l:Localize AnthropicSettings}"
										   VerticalAlignment="Center"
										   HorizontalAlignment="Center" FontWeight="500"
										   FontSize="13" />
														</Grid>
													</Expander.Header>
													<StackPanel Margin="0,10,0,10" Spacing="8">
														<TextBlock Text="{l:Localize AnthropicApiKey}" Padding="8,0,0,0"
									   VerticalAlignment="Center" Margin="0,0,16,0"
									   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="AnthropicApiKey" Text="{l:Localize YourApiKeyHerePlaceholder}" Margin="8,0,8,0" Classes="no-shadow" ToolTip.Tip="{l:Localize EnterAnthropicApiKeyTooltip}" />
														<TextBlock Text="{l:Localize AnthropicCompletionModel}" Padding="8,0,0,0"
									   VerticalAlignment="Center" Margin="0,0,16,0"
									   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="AnthropicCompletionModel" Classes="no-shadow"
																 Text="claude-2"
																 Margin="8,0,8,0"
																 ToolTip.Tip="{l:Localize SpecifyAnthropicModelTooltip}" />
														<TextBlock Text="{l:Localize SystemPrompt}" Padding="8,0,0,0"
																	VerticalAlignment="Center" Margin="0,0,16,0"
																	FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="AnthropicSystemPrompt"
																  Text=""
																  Margin="8,0,8,0"
																  Height="80"
																  TextWrapping="Wrap"
																  AcceptsReturn="True"
																  VerticalContentAlignment="Top"
																  ToolTip.Tip="{l:Localize EnterCustomSystemPrompt}" />
														<TextBlock Text="{l:Localize AnthropicEndpoint}" Padding="8,0,0,0"
									   VerticalAlignment="Center" Margin="0,0,16,0"
									   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="AnthropicEndpoint"
																 Classes="no-shadow"
																 Text="https://api.anthropic.com/v1" Margin="8,0,8,0"
																 ToolTip.Tip="{l:Localize SetAnthropicEndpointTooltip}" />
														<Grid ColumnDefinitions="*,*" Margin="8,0,8,0">
															<StackPanel Grid.Column="0" Spacing="4" Margin="0,0,4,0">
																<TextBlock Text="{l:Localize BatchSize}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="AnthropicBatchSize" Classes="no-shadow"
																		 ToolTip.Tip="{l:Localize AnthropicBatchSizeTooltip}" />
															</StackPanel>
															<StackPanel Grid.Column="1" Spacing="4" Margin="4,0,0,0">
																<TextBlock Text="{l:Localize MaxRetries}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="AnthropicMaxRetries" Classes="no-shadow"
																		 ToolTip.Tip="{l:Localize AnthropicMaxRetriesTooltip}" />
															</StackPanel>
														</Grid>
														<StackPanel Spacing="4" Margin="8,0,8,0" Height="45">
															<Grid ColumnDefinitions="*,Auto" Margin="0,5,0,0">
																<TextBlock Grid.Column="0" Text="{l:Localize Temperature}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																<TextBlock Grid.Column="1" x:Name="AnthropicTemperatureValue" Text="0.7" FontSize="12" Foreground="#6A6B6F" />
															</Grid>
															<Grid Margin="0,5,0,0">
																<Slider x:Name="AnthropicTemperature" Margin="12,0" Minimum="0" Maximum="1" Value="0.7" TickFrequency="0.1" IsSnapToTickEnabled="True"
																		ToolTip.Tip="{l:Localize AnthropicTemperatureTooltip}" />
															</Grid>
														</StackPanel>

														<!-- RAG Settings -->
														<Border BorderBrush="#EAECF0" BorderThickness="0,1,0,0" Margin="8,8,8,8" Padding="0,8,0,0">
															<StackPanel Spacing="8">
																<!-- Row 1: Toggle Button only -->
																<Grid ColumnDefinitions="*,Auto">
																	<CheckBox Grid.Column="0" x:Name="AnthropicEnableRAG" Content="{l:Localize EnableRAG}"
												  ToolTip.Tip="{l:Localize EnableRAGTooltip}"
												  HorizontalAlignment="Left" Margin="0,0,0,8" />

																	<Button Grid.Column="1" x:Name="AnthropicAdvancedRagButton"
																		Classes="flat"
																		IsEnabled="{Binding IsChecked, ElementName=AnthropicEnableRAG}"
																		ToolTip.Tip="{l:Localize ConfigureAdvancedRAGTooltip}"
																		VerticalAlignment="Bottom"
																		Height="41">
																		<StackPanel Orientation="Horizontal" Spacing="8">
																			<avalonia:MaterialIcon Kind="CogOutline" VerticalAlignment="Center" Width="16" Height="16" />
																			<TextBlock Text="{l:Localize AdvancedSettings}" Foreground="#1A1C1E" FontWeight="400" />
																		</StackPanel>
																		<Button.Flyout>
																			<Flyout Placement="Right">
																				<Border Background="White" BorderBrush="#DBDBDB" BorderThickness="1" CornerRadius="8" Padding="16" Width="350">
																					<StackPanel Spacing="16">
																						<TextBlock Text="{l:Localize AdvancedRAGTitle}" FontSize="14" FontWeight="500" Foreground="#1A1C1E" />

																						<!-- Max retrieved slider -->
																						<StackPanel Spacing="4">
																							<Grid ColumnDefinitions="*,Auto">
																								<TextBlock Grid.Column="0" Text="{l:Localize MaxRetrieved}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																								<TextBlock Grid.Column="1" x:Name="AnthropicMaxRetrievedValue" Text="10" FontSize="12" Foreground="#6A6B6F" />
																							</Grid>
																							<Slider x:Name="AnthropicMaxRetrieved" Minimum="1" Maximum="20" Value="10" TickFrequency="1" IsSnapToTickEnabled="True"
																									ToolTip.Tip="{l:Localize MaxDocumentsToRetrieveTooltip}" />
																						</StackPanel>



																						<!-- Query optimization toggle -->
																						<Grid ColumnDefinitions="*,Auto">
																							<TextBlock Grid.Column="0" Text="{l:Localize QueryOptimization}" FontSize="12" Foreground="#1A1C1E" FontWeight="500"
																												   ToolTip.Tip="{l:Localize QueryOptimizationTooltip}" />
																							<ToggleSwitch Grid.Column="1" x:Name="AnthropicQueryOptimization" IsChecked="True" OnContent="" OffContent="" />
																						</Grid>

																						<!-- Enable citations toggle -->
																						<Grid ColumnDefinitions="*,Auto">
																							<TextBlock Grid.Column="0" Text="{l:Localize EnableCitations}" FontSize="12" Foreground="#1A1C1E" FontWeight="500"
																														   ToolTip.Tip="{l:Localize EnableCitationsTooltip}" />
																							<ToggleSwitch Grid.Column="1" x:Name="AnthropicEnableCitations" IsChecked="False" OnContent="" OffContent="" />
																						</Grid>

																						<!-- Enable context sorting toggle -->
																						<Grid ColumnDefinitions="*,Auto">
																							<TextBlock Grid.Column="0" Text="{l:Localize EnableContextSorting}" FontSize="12" Foreground="#1A1C1E" FontWeight="500"
																														   ToolTip.Tip="{l:Localize EnableContextSortingTooltip}" />
																							<ToggleSwitch Grid.Column="1" x:Name="AnthropicEnableContextSorting" IsChecked="False" OnContent="" OffContent="" />
																						</Grid>

																						<!-- Context radius slider removed -->
																					</StackPanel>
																				</Border>
																			</Flyout>
																		</Button.Flyout>
																	</Button>
																</Grid>

																<StackPanel x:Name="AnthropicRagSettingsPanel" Spacing="8" IsVisible="{Binding IsChecked, ElementName=AnthropicEnableRAG}">
																	<!-- Row 2: Knowledgebase Source only -->
																	<StackPanel Spacing="4" Margin="0,0,0,8" >
																		<TextBlock Text="{l:Localize KnowledgebaseSource}"
												   FontSize="12"
												   Foreground="#1A1C1E"
												   FontWeight="500" />
																		<ComboBox x:Name="AnthropicKnowledgeSource"
																				  Width="300"
																				  Theme="{StaticResource MaterialOutlineComboBox}"
																				  assists:ComboBoxAssist.Label=""
																				  Padding="12, 4"
																				  Background="#FFFFFF"
																				  BorderBrush="#DBDBDB"
																				  BorderThickness="0.97"
																				  Foreground="#1A1C1E"
																				  HorizontalAlignment="Left">
																			<ComboBox.Styles>
																				<Style Selector="ComboBox /template/ Grid#PART_RootBorder">
																					<Setter Property="MinHeight" Value="36" />
																					<Setter Property="Margin" Value="0,0,0,0" />
																				</Style>
																				<Style Selector="ComboBox /template/ Border#PART_Border">
																					<Setter Property="CornerRadius" Value="8" />
																					<Setter Property="BorderBrush" Value="#DBDBDB" />
																				</Style>
																				<Style Selector="ComboBox /template/ Border#splitBorder">
																					<Setter Property="Margin" Value="0,6" />
																				</Style>
																				<Style Selector="ComboBox /template/ Border#watermarkRoot">
																					<Setter Property="VerticalAlignment" Value="Center" />
																					<Setter Property="Margin" Value="12,0,0,0" />
																				</Style>
																				<Style Selector="ComboBox /template/ TextBlock#floatingWatermark">
																					<Setter Property="Foreground" Value="#1A1C1E" />
																				</Style>

																				<Style Selector="ComboBox:focus-within /template/ Border#PART_Border">
																					<Setter Property="BorderBrush" Value="#DBDBDB" />
																					<Setter Property="BorderThickness" Value="0.97" />
																				</Style>
																				<Style Selector="ComboBoxItem">
																					<Setter Property="Padding" Value="12,8" />
																					<Setter Property="Background" Value="Transparent" />
																					<Setter Property="Foreground" Value="#1A1C1E" />
																					<Setter Property="FontSize" Value="13" />
																				</Style>
																				<Style Selector="ComboBox /template/ ContentPresenter">
																					<Setter Property="FontSize" Value="13" />
																				</Style>
																				<Style Selector="ComboBoxItem:pointerover /template/ ContentPresenter">
																					<Setter Property="Background" Value="#F5F5F5" />
																				</Style>
																				<Style Selector="ComboBox /template/ Path#arrow">
																					<Setter Property="Fill" Value="#1A1C1E" />
																				</Style>
																			</ComboBox.Styles>
																		</ComboBox>
																	</StackPanel>
																	<!-- Row 3: Top-K and Threshold in same row -->
																	<Grid ColumnDefinitions="*,*" Margin="0,4,0,0">
																		<StackPanel Grid.Column="0" Spacing="4" Margin="4,0,0,0">
																			<Grid ColumnDefinitions="*,Auto">
																				<TextBlock Grid.Column="0" Text="{l:Localize SimilarityThreshold}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																				<TextBlock Grid.Column="1" x:Name="AnthropicSimilarityThresholdValue" Text="0.7" FontSize="12" Foreground="#6A6B6F" />
																			</Grid>
																			<Grid Margin="0,15,0,0">
																				<Slider x:Name="AnthropicSimilarityThreshold" Margin="12,0" Minimum="0" Maximum="1" Value="0.7" TickFrequency="0.1" IsSnapToTickEnabled="True"
																						ToolTip.Tip="{l:Localize SimilarityThresholdTooltip}" />
																			</Grid>
																		</StackPanel>
																	</Grid>
																</StackPanel>
															</StackPanel>
														</Border>
													</StackPanel>
												</Expander>
											</Grid>
											<Border BorderBrush="#EAECF0" BorderThickness="1" />
											<Grid ColumnDefinitions="240,*" RowDefinitions="Auto" Margin="0,0,0,16">
												<StackPanel Grid.Row="0" Grid.Column="0" Orientation="Vertical" Spacing="4">
													<TextBlock Text="{l:Localize LocalProvider}" FontWeight="500"
									                           FontSize="14" Foreground="#1A1C1E" VerticalAlignment="Top" />
													<TextBlock FontSize="12" Foreground="#6A6B6F"
														   TextWrapping="Wrap" Text="{l:Localize GainAccessToLocalModel}" />
												</StackPanel>
												<Expander x:Name="OllamaExpander" Grid.Column="1" IsExpanded="False"
														  ExpandDirection="Down" BorderThickness="0" Margin="0,-10,0,0"
														  Padding="0" Background="#F5F5F5">
													<Expander.Header>
														<Grid ColumnDefinitions="Auto,*">
															<RadioButton Grid.Column="0" GroupName="CompletionProvider"
																		 x:Name="OllamaCompletionProvider"
																		 VerticalAlignment="Center" />
															<TextBlock Grid.Column="1" Text="{l:Localize OllamaSettings}"
										   VerticalAlignment="Center"
										   HorizontalAlignment="Center" FontWeight="500"
										   FontSize="13" />
														</Grid>
													</Expander.Header>
													<StackPanel Margin="0,10,0,10" Spacing="8">
														<TextBlock Text="{l:Localize OllamaCompletionModel}" Padding="8,0,0,0"
									   VerticalAlignment="Center" Margin="0,0,16,0"
									   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="OllamaCompletionModel" Text="llama2-7B-q4"
																 Margin="8,0,8,0" Classes="no-shadow"
																 ToolTip.Tip="{l:Localize SpecifyOllamaModelTooltip}" />
														<TextBlock Text="{l:Localize SystemPrompt}" Padding="8,0,0,0"
																   VerticalAlignment="Center" Margin="0,0,16,0"
																   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="OllamaSystemPrompt"
																  Text=""
																  Margin="8,0,8,0"
																  Height="80"
																  TextWrapping="Wrap"
																  AcceptsReturn="True"
																  VerticalContentAlignment="Top"
																  ToolTip.Tip="{l:Localize EnterCustomSystemPrompt}" />
														<TextBlock Text="{l:Localize OllamaEndpoint}" Padding="8,0,0,0"
									   VerticalAlignment="Center" Margin="0,0,16,0"
									   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="OllamaEndpoint" Text="http://localhost:11434"
																 Margin="8,0,8,0" Classes="no-shadow"
																 ToolTip.Tip="{l:Localize SetOllamaEndpointTooltip}" />
														<Grid ColumnDefinitions="*,*" Margin="8,0,8,0">
															<StackPanel Grid.Column="0" Spacing="4" Margin="0,0,4,0">
																<TextBlock Text="{l:Localize BatchSize}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="OllamaBatchSize" Classes="no-shadow"
																		 ToolTip.Tip="{l:Localize OllamaBatchSizeTooltip}" />
															</StackPanel>
															<StackPanel Grid.Column="1" Spacing="4" Margin="4,0,0,0">
																<TextBlock Text="{l:Localize MaxRetries}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="OllamaMaxRetries" Classes="no-shadow"
																		 ToolTip.Tip="{l:Localize OllamaMaxRetriesTooltip}" />
															</StackPanel>
														</Grid>
														<StackPanel Spacing="4" Margin="8,0,8,0" Height="45">
															<Grid ColumnDefinitions="*,Auto" Margin="0,5,0,0">
																<TextBlock Grid.Column="0" Text="{l:Localize Temperature}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																<TextBlock Grid.Column="1" x:Name="OllamaTemperatureValue" Text="0.7" FontSize="12" Foreground="#6A6B6F" />
															</Grid>
															<Grid Margin="0,5,0,0">
																<Slider x:Name="OllamaTemperature" Margin="12,0" Minimum="0" Maximum="1" Value="0.7" TickFrequency="0.1" IsSnapToTickEnabled="True"
																		ToolTip.Tip="{l:Localize OllamaTemperatureTooltip}" />
															</Grid>
														</StackPanel>

														<!-- RAG Settings -->
														<Border BorderBrush="#EAECF0" BorderThickness="0,1,0,0" Margin="8,8,8,8" Padding="0,8,0,0">
															<StackPanel Spacing="8">
																<!-- Row 1: Toggle Button only -->
																<Grid ColumnDefinitions="*,Auto">
																	<CheckBox Grid.Column="0" x:Name="OllamaEnableRAG" Content="{l:Localize EnableRAG}"
																			  ToolTip.Tip="{l:Localize EnableRAGTooltip}"
																			  HorizontalAlignment="Left" Margin="0,0,0,8" />

																	<Button Grid.Column="1" x:Name="OllamaAdvancedRagButton"
																			Classes="flat"
																			IsEnabled="{Binding IsChecked, ElementName=OllamaEnableRAG}"
																			ToolTip.Tip="{l:Localize ConfigureAdvancedRAGTooltip}"
																			VerticalAlignment="Bottom"
																			Height="41">
																		<StackPanel Orientation="Horizontal" Spacing="8">
																			<avalonia:MaterialIcon Kind="CogOutline" VerticalAlignment="Center" Width="16" Height="16" />
																			<TextBlock Text="{l:Localize AdvancedSettings}" Foreground="#1A1C1E" FontWeight="400" />
																		</StackPanel>
																		<Button.Flyout>
																			<Flyout Placement="Right">
																				<Border Background="White" BorderBrush="#DBDBDB" BorderThickness="1" CornerRadius="8" Padding="16" Width="350">
																					<StackPanel Spacing="16">
																						<TextBlock Text="{l:Localize AdvancedRAG}" FontSize="14" FontWeight="500" Foreground="#1A1C1E" />

																						<!-- Max retrieved slider -->
																						<StackPanel Spacing="4">
																							<Grid ColumnDefinitions="*,Auto">
																								<TextBlock Grid.Column="0" Text="{l:Localize MaxRetrieved}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																								<TextBlock Grid.Column="1" x:Name="OllamaMaxRetrievedValue" Text="10" FontSize="12" Foreground="#6A6B6F" />
																							</Grid>
																							<Slider x:Name="OllamaMaxRetrieved" Minimum="1" Maximum="20" Value="10" TickFrequency="1" IsSnapToTickEnabled="True"
																									ToolTip.Tip="{l:Localize MaxDocumentsToRetrieveTooltip}" />
																						</StackPanel>

																						<!-- Query optimization toggle -->
																						<Grid ColumnDefinitions="*,Auto">
																							<TextBlock Grid.Column="0" Text="{l:Localize QueryOptimization}" FontSize="12" Foreground="#1A1C1E" FontWeight="500"
												   ToolTip.Tip="{l:Localize QueryOptimizationTooltip}" />
																							<ToggleSwitch Grid.Column="1" x:Name="OllamaQueryOptimization" IsChecked="True" OnContent="" OffContent="" />
																						</Grid>

																						<!-- Enable citations toggle -->
																						<Grid ColumnDefinitions="*,Auto">
																							<TextBlock Grid.Column="0" Text="{l:Localize EnableCitations}" FontSize="12" Foreground="#1A1C1E" FontWeight="500"
													   ToolTip.Tip="{l:Localize EnableCitationsTooltip}" />
																							<ToggleSwitch Grid.Column="1" x:Name="OllamaEnableCitations" IsChecked="False" OnContent="" OffContent="" />
																						</Grid>
																						<!-- Enable context sorting toggle -->
																						<Grid ColumnDefinitions="*,Auto">
																							<TextBlock Grid.Column="0" Text="{l:Localize EnableContextSorting}" FontSize="12" Foreground="#1A1C1E" FontWeight="500"
													   ToolTip.Tip="{l:Localize EnableContextSortingTooltip}" />
																							<ToggleSwitch Grid.Column="1" x:Name="OllamaEnableContextSorting" IsChecked="False" OnContent="" OffContent="" />
																						</Grid>

																						<!-- Context radius slider removed -->
																					</StackPanel>
																				</Border>
																			</Flyout>
																		</Button.Flyout>
																	</Button>
																</Grid>

																<StackPanel x:Name="OllamaRagSettingsPanel" Spacing="8" IsVisible="{Binding IsChecked, ElementName=OllamaEnableRAG}">
																	<!-- Row 2: Knowledgebase Source only -->
																	<StackPanel Spacing="4" Margin="0,0,0,8" >
																		<TextBlock Text="{l:Localize KnowledgebaseSource}"
												   FontSize="12"
												   Foreground="#1A1C1E"
												   FontWeight="500" />
																		<ComboBox x:Name="OllamaKnowledgeSource"
																				  Width="300"
																				  Theme="{StaticResource MaterialOutlineComboBox}"
																				  assists:ComboBoxAssist.Label=""
																				  Padding="12, 4"
																				  Background="#FFFFFF"
																				  BorderBrush="#DBDBDB"
																				  BorderThickness="0.97"
																				  Foreground="#1A1C1E"
																				  HorizontalAlignment="Left">
																			<ComboBox.Styles>
																				<Style Selector="ComboBox /template/ Grid#PART_RootBorder">
																					<Setter Property="MinHeight" Value="36" />
																					<Setter Property="Margin" Value="0,0,0,0" />
																				</Style>
																				<Style Selector="ComboBox /template/ Border#PART_Border">
																					<Setter Property="CornerRadius" Value="8" />
																					<Setter Property="BorderBrush" Value="#DBDBDB" />
																				</Style>
																				<Style Selector="ComboBox /template/ Border#splitBorder">
																					<Setter Property="Margin" Value="0,6" />
																				</Style>
																				<Style Selector="ComboBox /template/ Border#watermarkRoot">
																					<Setter Property="VerticalAlignment" Value="Center" />
																					<Setter Property="Margin" Value="12,0,0,0" />
																				</Style>
																				<Style Selector="ComboBox /template/ TextBlock#floatingWatermark">
																					<Setter Property="Foreground" Value="#1A1C1E" />
																				</Style>

																				<Style Selector="ComboBox:focus-within /template/ Border#PART_Border">
																					<Setter Property="BorderBrush" Value="#DBDBDB" />
																					<Setter Property="BorderThickness" Value="0.97" />
																				</Style>
																				<Style Selector="ComboBoxItem">
																					<Setter Property="Padding" Value="12,8" />
																					<Setter Property="Background" Value="Transparent" />
																					<Setter Property="Foreground" Value="#1A1C1E" />
																					<Setter Property="FontSize" Value="13" />
																				</Style>
																				<Style Selector="ComboBox /template/ ContentPresenter">
																					<Setter Property="FontSize" Value="13" />
																				</Style>
																				<Style Selector="ComboBoxItem:pointerover /template/ ContentPresenter">
																					<Setter Property="Background" Value="#F5F5F5" />
																				</Style>
																				<Style Selector="ComboBox /template/ Path#arrow">
																					<Setter Property="Fill" Value="#1A1C1E" />
																				</Style>
																			</ComboBox.Styles>
																		</ComboBox>
																	</StackPanel>
																	<!-- Row 3: Top-K and Threshold in same row -->
																	<Grid ColumnDefinitions="*,*" Margin="0,4,0,0">
																		<StackPanel Grid.Column="0" Spacing="4" Margin="4,0,0,0">
																			<Grid ColumnDefinitions="*,Auto">
																				<TextBlock Grid.Column="0" Text="{l:Localize SimilarityThreshold}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																				<TextBlock Grid.Column="1" x:Name="OllamaSimilarityThresholdValue" Text="0.7" FontSize="12" Foreground="#6A6B6F" />
																			</Grid>
																			<Grid Margin="0,15,0,0">
																				<Slider x:Name="OllamaSimilarityThreshold" Margin="12,0" Minimum="0" Maximum="1" Value="0.7" TickFrequency="0.1" IsSnapToTickEnabled="True"
												ToolTip.Tip="{l:Localize SimilarityThresholdTooltip}" />
																			</Grid>
																		</StackPanel>
																	</Grid>
																</StackPanel>
															</StackPanel>
														</Border>
													</StackPanel>
												</Expander>
											</Grid>
											<Grid ColumnDefinitions="240,*" RowDefinitions="Auto" Margin="0,0,0,16">
												<StackPanel Grid.Row="0" Grid.Column="0" Orientation="Vertical" Spacing="4">
													<TextBlock Text="{l:Localize ViewProvider}" FontWeight="500"
															   FontSize="14" Foreground="#1A1C1E" VerticalAlignment="Top" />
													<TextBlock FontSize="12" Foreground="#6A6B6F"
															   TextWrapping="Wrap" Text="{l:Localize GainAccessToViewModel}" />
												</StackPanel>
												<Expander x:Name="ViewExpander" Grid.Column="1" IsExpanded="False"
														  ExpandDirection="Down" BorderThickness="0" Margin="0,-10,0,0"
														  Padding="0" Background="#F5F5F5">
													<Expander.Header>
														<Grid ColumnDefinitions="Auto,*">
															<RadioButton Grid.Column="0" GroupName="CompletionProvider"
																		 x:Name="ViewCompletionProvider"
																		 VerticalAlignment="Center" />
															<TextBlock Grid.Column="1" Text="{l:Localize ViewSettings}"
										   VerticalAlignment="Center"
										   HorizontalAlignment="Center" FontWeight="500"
										   FontSize="13" />
														</Grid>
													</Expander.Header>
													<StackPanel Margin="0,10,0,10" Spacing="8">
														<TextBlock Text="{l:Localize EmbeddingsApiKey}" Padding="8,0,0,0"
									   VerticalAlignment="Center" Margin="0,0,16,0"
									   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="ViewApiKey" Text="{l:Localize YourEmbeddingsApiKeyHerePlaceholder}" Margin="8,0,8,0" Classes="no-shadow" ToolTip.Tip="{l:Localize EnterViewEmbeddingsApiKeyTooltip}" />
														<TextBlock Text="{l:Localize ViewEndpoint}" Padding="8,0,0,0"
									   VerticalAlignment="Center" Margin="0,0,16,0"
									   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="ViewEndpoint" Text="https://your-view-endpoint"
																 Margin="8,0,8,0" Classes="no-shadow"
																 ToolTip.Tip="{l:Localize ViewEndpointTooltip}" />
														<TextBlock Text="{l:Localize OllamaHostName}" Padding="8,0,0,0"
									   VerticalAlignment="Center" Margin="0,0,16,0"
									   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="OllamaHostName" Text="https://ollama-host-name"
																 Margin="8,0,8,0" Classes="no-shadow"
																 ToolTip.Tip="{l:Localize OllamaHostNameTooltip}" />
														<TextBlock Text="{l:Localize AccessKey}" Padding="8,0,0,0"
									   VerticalAlignment="Center" Margin="0,0,16,0"
									   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="ViewAccessKey" Text="YOUR_VIEW_ACCESS_KEY" Margin="8,0,8,0" Classes="no-shadow" ToolTip.Tip="{l:Localize EnterViewAccessKeyTooltip}" />
														<TextBlock Text="{l:Localize TenantGuid}" Padding="8,0,0,0"
									   VerticalAlignment="Center" Margin="0,0,16,0"
									   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="ViewTenantGUID" Text="YOUR_TENANT_GUID" Margin="8,0,8,0" Classes="no-shadow" ToolTip.Tip="{l:Localize EnterViewTenantGUIDTooltip}" />
														<TextBlock Text="{l:Localize CompletionModel}" Padding="8,0,0,0"
									   VerticalAlignment="Center" Margin="0,0,16,0"
									   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="ViewCompletionModel" Text="llama3.1:8b"
																 Margin="8,0,8,0" Classes="no-shadow"
																 ToolTip.Tip="{l:Localize SpecifyViewModelTooltip}" />
														<TextBlock Text="{l:Localize SystemPrompt}" Padding="8,0,0,0"
																	   VerticalAlignment="Center" Margin="0,0,16,0"
																	   FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
														<TextBox x:Name="ViewSystemPrompt"
																  Text=""
																  Margin="8,0,8,0"
																  Height="80"
																  TextWrapping="Wrap"
																  AcceptsReturn="True"
																  VerticalContentAlignment="Top"
																  ToolTip.Tip="{l:Localize ViewSystemPromptTooltip}" />
														<Grid ColumnDefinitions="*,*" Margin="8,0,8,0">
															<StackPanel Grid.Column="0" Spacing="4" Margin="0,0,4,0">
																<TextBlock Text="{l:Localize BatchSize}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="ViewBatchSize" Classes="no-shadow"
																		 ToolTip.Tip="{l:Localize ViewBatchSizeTooltip}" />
															</StackPanel>
															<StackPanel Grid.Column="1" Spacing="4" Margin="4,0,0,0">
																<TextBlock Text="{l:Localize MaxRetries}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="ViewMaxRetries" Classes="no-shadow"
																		 ToolTip.Tip="{l:Localize ViewMaxRetriesTooltip}" />
															</StackPanel>
														</Grid>
														<StackPanel Spacing="4" Margin="8,0,8,0" Height="45">
															<Grid ColumnDefinitions="*,Auto" Margin="0,5,0,0">
																<TextBlock Grid.Column="0" Text="{l:Localize Temperature}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																<TextBlock Grid.Column="1" x:Name="ViewTemperatureValue" Text="0.7" FontSize="12" Foreground="#6A6B6F" />
															</Grid>
															<Grid Margin="0,5,0,0">
																<Slider x:Name="ViewTemperature" Margin="12,0" Minimum="0" Maximum="1" Value="0.7" TickFrequency="0.1" IsSnapToTickEnabled="True"
																		ToolTip.Tip="{l:Localize ViewTemperatureTooltip}" />
															</Grid>
														</StackPanel>

														<!-- RAG Settings -->
														<Border BorderBrush="#EAECF0" BorderThickness="0,1,0,0" Margin="8,8,8,8" Padding="0,8,0,0">
															<StackPanel Spacing="8">
																<TextBlock Text="{l:Localize RAGSettingsTitle}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" Padding="0,0,0,4" />

																<!-- Row 1: Toggle Button with Advanced Settings Button -->
																<Grid ColumnDefinitions="*,Auto">
																	<CheckBox Grid.Column="0" x:Name="ViewEnableRAG" Content="{l:Localize EnableRAG}"
																					  ToolTip.Tip="{l:Localize EnableRAGTooltip}"
																					  HorizontalAlignment="Left" Margin="0,0,0,8" />

																	<Button Grid.Column="1" x:Name="ViewAdvancedRagButton"
																					Classes="flat"
																					IsEnabled="{Binding IsChecked, ElementName=ViewEnableRAG}"
																					ToolTip.Tip="{l:Localize ConfigureAdvancedRAGTooltip}"
																					VerticalAlignment="Bottom"
																					Height="41">
																		<StackPanel Orientation="Horizontal" Spacing="8">
																			<avalonia:MaterialIcon Kind="CogOutline" VerticalAlignment="Center" Width="16" Height="16" />
																			<TextBlock Text="{l:Localize AdvancedSettingsTitle}" Foreground="#1A1C1E" FontWeight="400" />
																		</StackPanel>
																		<Button.Flyout>
																			<Flyout Placement="Right">
																				<Border Background="White" BorderBrush="#DBDBDB" BorderThickness="1" CornerRadius="8" Padding="16" Width="350">
																					<StackPanel Spacing="16">
																						<TextBlock Text="{l:Localize AdvancedRAGTitle}" FontSize="14" FontWeight="500" Foreground="#1A1C1E" />

																						<!-- Max retrieved slider -->
																						<StackPanel Spacing="4">
																							<Grid ColumnDefinitions="*,Auto">
																								<TextBlock Grid.Column="0" Text="{l:Localize MaxRetrieved}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																								<TextBlock Grid.Column="1" x:Name="ViewMaxRetrievedValue" Text="10" FontSize="12" Foreground="#6A6B6F" />
																							</Grid>
																							<Slider x:Name="ViewMaxRetrieved" Minimum="1" Maximum="20" Value="10" TickFrequency="1" IsSnapToTickEnabled="True"
																														ToolTip.Tip="{l:Localize MaxRetrievedTooltip}" />
																						</StackPanel>

																						<!-- Query optimization toggle -->
																						<Grid ColumnDefinitions="*,Auto">
																							<TextBlock Grid.Column="0" Text="{l:Localize QueryOptimization}" FontSize="12" Foreground="#1A1C1E" FontWeight="500"
												   ToolTip.Tip="{l:Localize QueryOptimizationTooltip}" />
																							<ToggleSwitch Grid.Column="1" x:Name="ViewQueryOptimization" IsChecked="True" OnContent="" OffContent="" />
																						</Grid>

																						<!-- Enable citations toggle -->
																						<Grid ColumnDefinitions="*,Auto">
																							<TextBlock Grid.Column="0" Text="{l:Localize EnableCitations}" FontSize="12" Foreground="#1A1C1E" FontWeight="500"
													   ToolTip.Tip="{l:Localize EnableCitationsTooltip}" />
																							<ToggleSwitch Grid.Column="1" x:Name="ViewEnableCitations" IsChecked="False" OnContent="" OffContent="" />
																						</Grid>

																						<!-- Enable context sorting toggle -->
																						<Grid ColumnDefinitions="*,Auto">
																							<TextBlock Grid.Column="0" Text="{l:Localize EnableContextSorting}" FontSize="12" Foreground="#1A1C1E" FontWeight="500"
													   ToolTip.Tip="{l:Localize EnableContextSortingTooltip}" />
																							<ToggleSwitch Grid.Column="1" x:Name="ViewEnableContextSorting" IsChecked="False" OnContent="" OffContent="" />
																						</Grid>

																						<!-- Context radius slider removed -->
																					</StackPanel>
																				</Border>
																			</Flyout>
																		</Button.Flyout>
																	</Button>
																</Grid>

																<StackPanel x:Name="ViewRagSettingsPanel" Spacing="8" IsVisible="{Binding IsChecked, ElementName=ViewEnableRAG}">
																	<!-- Row 2: Knowledgebase Source only -->
																	<StackPanel Spacing="4" Margin="0,0,0,8" >
																		<TextBlock Text="{l:Localize KnowledgebaseSource}"
												   FontSize="12"
												   Foreground="#1A1C1E"
												   FontWeight="500" />
																		<ComboBox x:Name="ViewKnowledgeSource"
																				  Width="300"
																				  Theme="{StaticResource MaterialOutlineComboBox}"
																				  assists:ComboBoxAssist.Label=""
																				  Padding="12, 4"
																				  Background="#FFFFFF"
																				  BorderBrush="#DBDBDB"
																				  BorderThickness="0.97"
																				  Foreground="#1A1C1E"
																				  HorizontalAlignment="Left">
																			<ComboBox.Styles>
																				<Style Selector="ComboBox /template/ Grid#PART_RootBorder">
																					<Setter Property="MinHeight" Value="36" />
																					<Setter Property="Margin" Value="0,0,0,0" />
																				</Style>
																				<Style Selector="ComboBox /template/ Border#PART_Border">
																					<Setter Property="CornerRadius" Value="8" />
																					<Setter Property="BorderBrush" Value="#DBDBDB" />
																				</Style>
																				<Style Selector="ComboBox /template/ Border#splitBorder">
																					<Setter Property="Margin" Value="0,6" />
																				</Style>
																				<Style Selector="ComboBox /template/ Border#watermarkRoot">
																					<Setter Property="VerticalAlignment" Value="Center" />
																					<Setter Property="Margin" Value="12,0,0,0" />
																				</Style>
																				<Style Selector="ComboBox /template/ TextBlock#floatingWatermark">
																					<Setter Property="Foreground" Value="#1A1C1E" />
																				</Style>

																				<Style Selector="ComboBox:focus-within /template/ Border#PART_Border">
																					<Setter Property="BorderBrush" Value="#DBDBDB" />
																					<Setter Property="BorderThickness" Value="0.97" />
																				</Style>
																				<Style Selector="ComboBoxItem">
																					<Setter Property="Padding" Value="12,8" />
																					<Setter Property="Background" Value="Transparent" />
																					<Setter Property="Foreground" Value="#1A1C1E" />
																					<Setter Property="FontSize" Value="13" />
																				</Style>
																				<Style Selector="ComboBox /template/ ContentPresenter">
																					<Setter Property="FontSize" Value="13" />
																				</Style>
																				<Style Selector="ComboBoxItem:pointerover /template/ ContentPresenter">
																					<Setter Property="Background" Value="#F5F5F5" />
																				</Style>
																				<Style Selector="ComboBox /template/ Path#arrow">
																					<Setter Property="Fill" Value="#1A1C1E" />
																				</Style>
																			</ComboBox.Styles>
																		</ComboBox>
																	</StackPanel>
																	<Grid ColumnDefinitions="*,*" Margin="0,4,0,0">
																		<StackPanel Grid.Column="0" Spacing="4" Margin="4,0,0,0">
																			<Grid ColumnDefinitions="*,Auto">
																				<TextBlock Grid.Column="0" Text="{l:Localize SimilarityThreshold}" FontSize="12" Foreground="#1A1C1E" FontWeight="500" />
																				<TextBlock Grid.Column="1" x:Name="ViewSimilarityThresholdValue" Text="0.7" FontSize="12" Foreground="#6A6B6F" />
																			</Grid>
																			<Grid Margin="0,15,0,0">
																				<Slider x:Name="ViewSimilarityThreshold" Margin="12,0" Minimum="0" Maximum="1" Value="0.7" TickFrequency="0.1" IsSnapToTickEnabled="True"
												ToolTip.Tip="{l:Localize SimilarityThresholdTooltip}" />
																			</Grid>
																		</StackPanel>
																	</Grid>
																</StackPanel>
															</StackPanel>
														</Border>
													</StackPanel>
												</Expander>
											</Grid>
											<Border BorderBrush="#EAECF0" BorderThickness="1" />
											<Grid ColumnDefinitions="240,*" RowDefinitions="Auto" Margin="0,0,0,4">
												<StackPanel Grid.Column="0" Orientation="Vertical" Spacing="4">
													<TextBlock Text="{l:Localize EmbeddingsGeneration}" FontWeight="500" FontSize="14" Foreground="#1A1C1E" />
													<TextBlock Margin="0, 0, 0, 4" FontSize="12" Foreground="#6A6B6F" TextWrapping="Wrap" Text="{l:Localize EmbeddingsGenerationDescription}" />
													<TextBlock FontSize="12" Foreground="#9CA3AF" TextWrapping="Wrap">
														<Run Text="{l:Localize EmbeddingsGenerationWarning}" />
													</TextBlock>
												</StackPanel>
												<StackPanel Grid.Column="1" Orientation="Vertical" Spacing="16">
													<StackPanel Spacing="36" x:Name="EmbeddingModelGroup">
														<!-- OpenAI Embedding Model -->
														<Expander Background="#F5F5F5" Margin="0,-10,0,0" Padding="0"
																  BorderThickness="0">
															<Expander.Header>
																<Grid ColumnDefinitions="Auto,*">
																	<RadioButton Grid.Column="0"
																				 GroupName="EmbeddingProvider"
																				 x:Name="OpenAIEmbeddingModel2"
																				 VerticalAlignment="Center"
																				 Margin="0,0,6,0"
																				 Checked="EmbeddingModel_Checked" />
																	<TextBlock Grid.Column="1"
																			   Text="{l:Localize OpenAIEmbeddingModelHeader}"
																			   VerticalAlignment="Center"
																			   HorizontalAlignment="Center"
																			   FontWeight="500" FontSize="13" />
																</Grid>
															</Expander.Header>
															<StackPanel Orientation="Vertical" Spacing="8"
																		Margin="16,10,8,10">
																<TextBlock Text="{l:Localize EmbeddingModelName}" FontSize="12"
																		   Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="OpenAIEmbeddingModel"
																		 Text="text-embedding-3-small" Classes="no-shadow"
																		 ToolTip.Tip="{l:Localize SpecifyOpenAIEmbeddingModelTooltip}" />
																<TextBlock Text="{l:Localize EmbeddingDimensionality}" FontSize="12"
																		   Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="OpenAIEmbeddingDimensions" Text="1536"
																		 Classes="no-shadow"
																		 ToolTip.Tip="{l:Localize EmbeddingDimensionalityTooltip}" />
																<TextBlock Text="{l:Localize EmbeddingMaxTokens}" FontSize="12"
																		   Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="OpenAIEmbeddingMaxTokens" Text="1000"
																		 Classes="no-shadow"
																		 ToolTip.Tip="{l:Localize EmbeddingMaxTokensTooltip}" />
															</StackPanel>
														</Expander>
														<!-- VoyageAI Embedding Model -->
														<Expander Background="#F5F5F5" Margin="0,-10,0,0" Padding="0"
																  BorderThickness="0">
															<Expander.Header>
																<Grid ColumnDefinitions="Auto,*">
																	<RadioButton Grid.Column="0"
																				 GroupName="EmbeddingProvider"
																				 x:Name="VoyageEmbeddingModel2"
																				 VerticalAlignment="Center"
																				 Margin="0,0,6,0"
																				 Checked="EmbeddingModel_Checked" />
																	<TextBlock Grid.Column="1"
																			   Text="{l:Localize VoyageAIEmbeddingModelHeader}"
																			   VerticalAlignment="Center"
																			   HorizontalAlignment="Center"
																			   FontWeight="500" FontSize="13" />
																</Grid>
															</Expander.Header>
															<StackPanel Orientation="Vertical" Spacing="8"
																		Margin="16,10,8,10">
																<TextBlock Text="{l:Localize EmbeddingModelName}" FontSize="12"
																		   Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="VoyageEmbeddingModel" Text="voyage-3"
																		 Classes="no-shadow"
																		 ToolTip.Tip="{l:Localize SpecifyVoyageAIEmbeddingModelTooltip}" />
																<TextBlock Text="{l:Localize EmbeddingDimensionality}" FontSize="12"
																		   Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="VoyageEmbeddingDimensions" Text="1536"
																		 Classes="no-shadow"
																		 ToolTip.Tip="{l:Localize EmbeddingDimensionalityTooltip}" />
																<TextBlock Text="{l:Localize EmbeddingMaxTokens}" FontSize="12"
																		   Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="VoyageEmbeddingMaxTokens" Text="1000"
																		 Classes="no-shadow"
																		 ToolTip.Tip="{l:Localize EmbeddingMaxTokensTooltip}" />
																<TextBlock Text="{l:Localize ApiKey}" FontSize="12"
																		   Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="VoyageApiKey" Text="YOUR_API_KEY_HERE" Margin="8,0,8,0" Classes="no-shadow" ToolTip.Tip="{l:Localize EnterVoyageAIApiKeyTooltip}" />
																<TextBlock Text="{l:Localize Endpoint}" FontSize="12"
																		   Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="VoyageEndpoint"
																		 Text="https://api.voyageai.com/"
																		 Classes="no-shadow"
																		 ToolTip.Tip="{l:Localize SetVoyageAIEndpointTooltip}" />
															</StackPanel>
														</Expander>
														<!-- Ollama Embedding Model -->
														<Expander Background="#F5F5F5" Margin="0,-10,0,0" Padding="0"
																  BorderThickness="0">
															<Expander.Header>
																<Grid ColumnDefinitions="Auto,*">
																	<RadioButton Grid.Column="0"
																				 GroupName="EmbeddingProvider"
																				 x:Name="OllamaEmbeddingModel"
																				 VerticalAlignment="Center"
																				 Margin="0,0,6,0"
																				 Checked="EmbeddingModel_Checked" />
																	<TextBlock Grid.Column="1"
																			   Text="{l:Localize OllamaEmbeddingModelHeader}"
																			   VerticalAlignment="Center"
																			   HorizontalAlignment="Center"
																			   FontWeight="500" FontSize="13" />
																</Grid>
															</Expander.Header>
															<StackPanel Orientation="Vertical" Spacing="8"
																		Margin="16,10,8,10">
																<TextBlock Text="{l:Localize EmbeddingModelName}" FontSize="12"
																		   Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="OllamaModel"
												 Text="sentence-transformers/all-MiniLM-L6-v2"
												 Classes="no-shadow"
												 ToolTip.Tip="{l:Localize SpecifyOllamaEmbeddingModelTooltip}" />
																<TextBlock Text="{l:Localize EmbeddingDimensionality}" FontSize="12"
																		   Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="OllamaEmbeddingDimensions" Text="1536"
															 Classes="no-shadow"
															 ToolTip.Tip="{l:Localize EmbeddingDimensionalityTooltip}" />
																<TextBlock Text="{l:Localize EmbeddingMaxTokens}" FontSize="12"
																		   Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="OllamaEmbeddingMaxTokens" Text="1000"
															 Classes="no-shadow"
															 ToolTip.Tip="{l:Localize EmbeddingMaxTokensTooltip}" />
															</StackPanel>
														</Expander>
														<!-- View Embedding Model -->
														<Expander Background="#F5F5F5" Margin="0,-10,0,0" Padding="0"
																  BorderThickness="0">
															<Expander.Header>
																<Grid ColumnDefinitions="Auto,*">
																	<RadioButton Grid.Column="0"
																				 GroupName="EmbeddingProvider"
																				 x:Name="ViewEmbeddingModel2"
																				 VerticalAlignment="Center"
																				 Margin="0,0,6,0"
																				 Checked="EmbeddingModel_Checked" />
																	<TextBlock Grid.Column="1" Text="{l:Localize ViewEmbeddingModelHeader}"
																			   VerticalAlignment="Center"
																			   HorizontalAlignment="Center"
																			   FontWeight="500" FontSize="13" />
																</Grid>
															</Expander.Header>
															<StackPanel Orientation="Vertical" Spacing="8"
																		Margin="16,10,8,10">
																<TextBlock Text="{l:Localize EmbeddingModelName}" FontSize="12"
																		   Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="ViewEmbeddingModel"
															 Text="sentence-transformers/all-MiniLM-L6-v2"
															 Classes="no-shadow"
															 ToolTip.Tip="{l:Localize SpecifyViewEmbeddingModelTooltip}" />
																<TextBlock Text="{l:Localize EmbeddingDimensionality}" FontSize="12"
																		   Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="ViewEmbeddingDimensions" Text="1536"
															 Classes="no-shadow"
															 ToolTip.Tip="{l:Localize EmbeddingDimensionalityTooltip}" />
																<TextBlock Text="{l:Localize EmbeddingMaxTokens}" FontSize="12"
																		   Foreground="#1A1C1E" FontWeight="500" />
																<TextBox x:Name="ViewEmbeddingMaxTokens" Text="1000"
															 Classes="no-shadow"
															 ToolTip.Tip="{l:Localize EmbeddingMaxTokensTooltip}" />
															</StackPanel>
														</Expander>
													</StackPanel>
												</StackPanel>
											</Grid>
										</StackPanel>
									</ScrollViewer>
									<Border Grid.Row="1" Padding="20,10" Background="#FFFFFF" BorderBrush="#EAECF0" BorderThickness="0,0,0,0">
										<Button x:Name="SaveSettingsButton"
												Click="SaveSettings2_Click"
												Classes="default"
												HorizontalAlignment="Left"
												Padding="12,8">
											<Button.Content>
												<StackPanel Orientation="Horizontal" Spacing="8">
													<avalonia:MaterialIcon x:Name="SaveSettingsSpinner"
																			 Kind="Refresh"
																			 Height="16"
																			 Width="16"
																			 IsVisible="False" />
													<TextBlock x:Name="SaveSettingsText" Text="{l:Localize SaveSettings}" />
												</StackPanel>
											</Button.Content>
										</Button>
									</Border>
								</Grid>
							</Border>
						</TabItem>
						<TabItem Header="{l:Localize LocalModels}">
							<Border Padding="0,0,0,0">
								<controls:LocalModelsView />
							</Border>
						</TabItem>
						<TabItem Header="{l:Localize Language}">
							<Border Padding="0,20,0,0">
								<ScrollViewer>
									<StackPanel Orientation="Vertical" Spacing="20">
										<StackPanel Spacing="8">
											<TextBlock Text="{l:Localize Language}" FontWeight="500" FontSize="14" Foreground="#1A1C1E" />
											<TextBlock FontSize="12" Foreground="#6A6B6F" TextWrapping="Wrap" Text="{l:Localize SelectLanguage}" />
											<StackPanel x:Name="LanguageSelectionPanel" Margin="0,12,0,0" Spacing="8">
												<RadioButton x:Name="EnglishLanguageRadio" GroupName="Language" Content="{l:Localize English}" IsChecked="True" Tag="en" />
												<RadioButton x:Name="HindiLanguageRadio" GroupName="Language" Content="{l:Localize Hindi}" Tag="hi" />
												<RadioButton x:Name="SimplifiedChineseLanguageRadio" GroupName="Language" Content="{l:Localize Simplified Chinese}" Tag="zh-CN" />
												<RadioButton x:Name="JapaneseLanguageRadio" GroupName="Language" Content="{l:Localize Japanese}" Tag="ja" />
												<RadioButton x:Name="GermanLanguageRadio" GroupName="Language" Content="{l:Localize German}" Tag="de" />
												<RadioButton x:Name="SpanishLanguageRadio" GroupName="Language" Content="{l:Localize Spanish}" Tag="es" />
												<RadioButton x:Name="KoreanLanguageRadio" GroupName="Language" Content="{l:Localize Korean}" Tag="ko" />
												<RadioButton x:Name="PortugueseLanguageRadio" GroupName="Language" Content="{l:Localize Portuguese}" Tag="pt" />
												<RadioButton x:Name="FrenchLanguageRadio" GroupName="Language" Content="{l:Localize French}" Tag="fr" />
											</StackPanel>
										</StackPanel>
										<StackPanel VerticalAlignment="Bottom" Margin="0,20,0,0">
											<Button x:Name="SaveLanguageButton"
													Click="SaveLanguage_Click"
													Classes="default"
													HorizontalAlignment="Left"
													Padding="12,8">
												<Button.Content>
													<StackPanel Orientation="Horizontal" Spacing="8">
														<avalonia:MaterialIcon x:Name="SaveLanguageSpinner"
																			 Kind="Refresh"
																			 Height="16"
																			 Width="16"
																			 IsVisible="False" />
														<TextBlock Text="{l:Localize SaveLanguage}" />
													</StackPanel>
												</Button.Content>
											</Button>
										</StackPanel>
									</StackPanel>
								</ScrollViewer>
							</Border>
						</TabItem>
					</TabControl>
				</Grid >
				<Grid Name="MyFilesPanel" Margin="20" IsVisible="False"
                      DragDrop.AllowDrop="True"
                      DragDrop.DragOver="MyFilesPanel_DragOver"
                      DragDrop.Drop="MyFilesPanel_Drop">
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto" />
						<RowDefinition Height="Auto" />
						<RowDefinition Height="Auto" />
						<RowDefinition Height="*" />
						<RowDefinition Height="Auto" />
					</Grid.RowDefinitions>

					<!-- Ingestion Progress Popup - Added to MyFilesPanel -->
					<Controls:IngestionProgressPopup x:Name="IngestionProgressPopup"
                                      HorizontalAlignment="Right"
                                      VerticalAlignment="Bottom"
                                      Margin="0,0,0,0"
                                      ZIndex="2"
                                      Grid.Row="0"
                                      Grid.RowSpan="4" />

					<StackPanel Grid.Row="0" Spacing="12" Margin="0, 20, 0, 0">
						<TextBlock Text="{l:Localize Files}" Foreground="#1A1C1E" FontWeight="500" FontSize="16" />
						<Border BorderThickness="0,0,0,1" BorderBrush="#EAECF0" Margin="0,0,0,8" />
					</StackPanel>

					<Grid Grid.Row="1" Margin="0,20,0,0">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="*" />
							<ColumnDefinition Width="Auto" />
						</Grid.ColumnDefinitions>
						<StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right"
                                    Spacing="8">
							<Button Click="IngestBrowseButton_Click"
                                    Classes="flat" VerticalAlignment="Bottom"
                                    Height="41">
								<StackPanel Orientation="Horizontal" Spacing="8">
									<avalonia:MaterialIcon Kind="Plus"
                                                           VerticalAlignment="Top"
                                                           Height="16" Width="16" />
									<TextBlock Text="{l:Localize UploadFiles}" Foreground="#1A1C1E" FontWeight="400" />
								</StackPanel>
							</Button>
							<Button x:Name="SelectAllButton"
		                            Click="SelectAll_Click"
		                            Classes="flat"
		                            VerticalAlignment="Bottom"
		                            Height="41"
                                    IsVisible="{Binding #FilesDataGrid.IsVisible}">
								<StackPanel Orientation="Horizontal" Spacing="8">
									<avalonia:MaterialIcon Kind="CheckboxMultipleMarkedOutline" VerticalAlignment="Center" Width="16" Height="16" />
									<TextBlock Text="{l:Localize SelectAll}" Foreground="#1A1C1E" FontWeight="400" />
								</StackPanel>
							</Button>
							<Button x:Name="RemoveSelectedFilesButton"
		                            Click="RemoveSelectedFiles_Click"
		                            Classes="flat"
		                            VerticalAlignment="Bottom"
		                            Height="41"
                                    IsVisible="{Binding #FilesDataGrid.IsVisible}">
								<StackPanel Orientation="Horizontal" Spacing="8">
									<avalonia:MaterialIcon Kind="DeleteOutline" VerticalAlignment="Center" Width="16" Height="16" />
									<TextBlock Text="{l:Localize RemoveSelectedFiles}" Foreground="#1A1C1E" FontWeight="400" />
								</StackPanel>
							</Button>
						</StackPanel>
					</Grid>

					<Border Grid.Row="2" Name="UploadFilesPanel" Background="#FAFAFA" CornerRadius="24"
                            Margin="0,30,0,0" IsVisible="False">
						<Grid RowDefinitions="*,Auto">
							<Panel Grid.Row="0">
								<Canvas Margin="32">
									<Rectangle
	                                    Canvas.Left="0" Canvas.Top="0"
	                                    Width="{Binding $parent[Panel].Bounds.Width}"
	                                    Height="{Binding $parent[Panel].Bounds.Height}"
	                                    Stroke="#EDEDED"
	                                    StrokeThickness="2"
	                                    StrokeDashArray="4,4"
	                                    Fill="Transparent"
	                                    RadiusX="16" RadiusY="16" />
								</Canvas>
								<StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="60"
	                                        Spacing="8">
									<Border
	                                    HorizontalAlignment="Center" VerticalAlignment="Center">
										<avalonia:MaterialIcon Kind="PlusCircleOutline" Width="24" Height="24"
	                                                           HorizontalAlignment="Center" VerticalAlignment="Center"
	                                                           Foreground="#A6A6A8" />
									</Border>
									<TextBlock Text="{l:Localize UploadFiles}" FontSize="20" FontWeight="500"
	                                           HorizontalAlignment="Center" Foreground="#1A1C1E" />
									<StackPanel Orientation="Horizontal">
										<Button Content="{l:Localize ClickToUpload}" Classes="link" Foreground="#0472EF"
	                                            HorizontalAlignment="Center" Click="IngestBrowseButton_Click" FontSize="14"
	                                            Cursor="Hand" />
										<TextBlock Text="{l:Localize OrDragAndDrop}" Foreground="#464A4D"
													   HorizontalAlignment="Center" />
									</StackPanel>

									<TextBlock Text="{l:Localize MaxFileSize}" Foreground="#6A6B6F" FontSize="12"
	                                           HorizontalAlignment="Center" />
								</StackPanel>
							</Panel>
							<ProgressBar x:Name="UploadSpinner"
								 Grid.Row="1"
								 VerticalAlignment="Bottom"
								 HorizontalAlignment="Stretch"
								 IsIndeterminate="True"
								 Margin="32,8,32,16"
								 IsVisible="False" />
						</Grid>
					</Border>

					<Grid Grid.Row="3" Name="FileOperationsPanel">
						<ProgressBar x:Name="IngestSpinner"
								 VerticalAlignment="Top"
								 HorizontalAlignment="Stretch"
								 IsIndeterminate="True"
								 Margin="0,10,0,10"
								 IsVisible="False" />
						<ProgressBar x:Name="NavigationSpinner"
								 VerticalAlignment="Top"
								 HorizontalAlignment="Stretch"
								 IsIndeterminate="True"
								 Margin="0,10,0,10"
								 IsVisible="False" />
						<DataGrid x:Name="FilesDataGrid"
						          VerticalScrollBarVisibility="Visible"
                                  AutoGenerateColumns="False"
                                  IsReadOnly="True"
                                  CanUserReorderColumns="False"
                                  CanUserResizeColumns="False"
                                  GridLinesVisibility="Horizontal"
                                  Background="#FFFFFF"
                                  HorizontalGridLinesBrush="#EDEDED"
                                  BorderThickness="1"
                                  BorderBrush="#EDEDED"
                                  SelectionMode="Extended"
								  Margin="0,20,0,0"
                                  x:DataType="classes:FileViewModel">
							<DataGrid.Styles>
								<Style Selector="DataGridColumnHeader">
									<Setter Property="Background" Value="#FAFAFA" />
									<Setter Property="Foreground" Value="#1A1C1E" />
									<Setter Property="FontWeight" Value="500" />
									<Setter Property="FontSize" Value="14.5" />
									<Setter Property="Padding" Value="12 0 8 0" />
									<Setter Property="MinHeight" Value="24" />
									<Setter Property="Height" Value="38" />
								</Style>
								<Style Selector="DataGridRow">
									<Setter Property="MinHeight" Value="24" />
									<Setter Property="Height" Value="38" />
									<Setter Property="BorderBrush" Value="#EDEDED" />
									<Setter Property="BorderThickness" Value="0,0,0,1" />
								</Style>
							</DataGrid.Styles>
							<DataGrid.Columns>
								<DataGridTemplateColumn Header="{l:Localize Select}" Width="60">
									<DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<CheckBox IsChecked="{Binding IsChecked, Mode=TwoWay}"
													  VerticalAlignment="Center" HorizontalAlignment="Center"
													  Checked="FileCheckBox_Checked"
													  Unchecked="FileCheckBox_Unchecked"
													  Width="16" Height="16" />
										</DataTemplate>
									</DataGridTemplateColumn.CellTemplate>
								</DataGridTemplateColumn>
								<DataGridTextColumn Header="{l:Localize Name}" Binding="{Binding Name}" Width="200" />

								<DataGridTextColumn Header="{l:Localize Size}"
								Binding="{Binding ContentLength, Converter={StaticResource ByteSizeConverter}}"
								Width="100" />
								<DataGridTextColumn Header="{l:Localize Type}" Binding="{Binding DocumentType}"
								Width="150" />
								<DataGridTextColumn Header="{l:Localize DateCreated}" Width="190"
								Binding="{Binding CreatedUtc, Converter={StaticResource DateTimeConverter}, Mode=OneWay}" />

								<DataGridTemplateColumn Header="{l:Localize Actions}" Width="150">
									<DataGridTemplateColumn.CellTemplate>
										<DataTemplate>
											<StackPanel Orientation="Horizontal" Spacing="15">
												<Button Click="OpenInFileExplorer_Click"
														Tag="{Binding}"
														ToolTip.Tip="{l:Localize OpenInFileExplorer}"
														Background="Transparent"
														BorderThickness="0"
														Padding="0"
														Cursor="Hand">
													<Button.Template>
														<ControlTemplate TargetType="Button">
															<ContentPresenter HorizontalAlignment="Center"
																			  VerticalAlignment="Center"
																			  Background="Transparent"
																			  Content="{TemplateBinding Content}" />
														</ControlTemplate>
													</Button.Template>
													<Button.Styles>
														<Style Selector="Button:pointerover">
															<Setter Property="Background" Value="Transparent" />
														</Style>
														<Style Selector="Button:pressed">
															<Setter Property="Background" Value="Transparent" />
														</Style>
													</Button.Styles>
													<avalonia:MaterialIcon Kind="FolderOpen" Width="18" Height="18" Foreground="#6A6B6F" />
												</Button>
												<Button Click="ReprocessFile_Click"
														Tag="{Binding}"
														ToolTip.Tip="{l:Localize ReprocessFile}"
														Background="Transparent"
														BorderThickness="0"
														Padding="0"
														Cursor="Hand">
													<Button.Template>
														<ControlTemplate TargetType="Button">
															<ContentPresenter HorizontalAlignment="Center"
																			  VerticalAlignment="Center"
																			  Background="Transparent"
																			  Content="{TemplateBinding Content}" />
														</ControlTemplate>
													</Button.Template>
													<Button.Styles>
														<Style Selector="Button:pointerover">
															<Setter Property="Background" Value="Transparent" />
														</Style>
														<Style Selector="Button:pressed">
															<Setter Property="Background" Value="Transparent" />
														</Style>
													</Button.Styles>
													<avalonia:MaterialIcon Kind="Refresh" Width="18" Height="18" Foreground="#6A6B6F" />
												</Button>
												<Button Click="DeleteFile_Click"
														Tag="{Binding}"
														ToolTip.Tip="{l:Localize DeleteFile}"
														Background="Transparent"
														BorderThickness="0"
														Padding="0"
														Cursor="Hand">
													<Button.Template>
														<ControlTemplate TargetType="Button">
															<ContentPresenter HorizontalAlignment="Center"
																			  VerticalAlignment="Center"
																			  Background="Transparent"
																			  Content="{TemplateBinding Content}" />
														</ControlTemplate>
													</Button.Template>
													<Button.Styles>
														<Style Selector="Button:pointerover">
															<Setter Property="Background" Value="Transparent" />
														</Style>
														<Style Selector="Button:pressed">
															<Setter Property="Background" Value="Transparent" />
														</Style>
													</Button.Styles>
													<avalonia:MaterialIcon Kind="TrashCanOutline" Width="18" Height="18" Foreground="#6A6B6F" />
												</Button>
											</StackPanel>
										</DataTemplate>
									</DataGridTemplateColumn.CellTemplate>
								</DataGridTemplateColumn>

							</DataGrid.Columns>
						</DataGrid>
					</Grid>
					<!-- Pagination Controls -->
					<Border x:Name="FilePaginationControls"
							IsVisible="False"
						    Grid.Row="4"
							BorderThickness="1"
							BorderBrush="#EDEDED"
							Background="#FAFAFA"
							Padding="16,12"
							Margin="0,10,0,0">
						<Grid ColumnDefinitions="*,Auto,*">
							<!-- Left side - Page info -->
							<StackPanel Grid.Column="0"
										Orientation="Vertical"
										Spacing="4"
										VerticalAlignment="Center">
								<TextBlock x:Name="PageRangeText"
						   Text="{l:Localize NoItemsToDisplay}"
						   FontSize="12"
						   Foreground="#6A6B6F" />
								<TextBlock x:Name="PageInfoText"
						   Text="{l:Localize NoPages}"
						   FontSize="11"
						   Foreground="#8E8E93" />
							</StackPanel>

							<!-- Center - Navigation buttons -->
							<StackPanel Grid.Column="1"
										Orientation="Horizontal"
										Spacing="8"
										HorizontalAlignment="Center"
										VerticalAlignment="Center">
								<Button x:Name="FirstPageButton"
										Classes="flat"
										Width="32"
										Height="32"
										ToolTip.Tip="{l:Localize FirstPage}">
									<avalonia:MaterialIcon Kind="ChevronDoubleLeft" Width="16" Height="16" Foreground="#6A6B6F" />
								</Button>
								<Button x:Name="PreviousPageButton"
										Classes="flat"
										Width="32"
										Height="32"
										ToolTip.Tip="{l:Localize PreviousPage}">
									<avalonia:MaterialIcon Kind="ChevronLeft" Width="16" Height="16" Foreground="#6A6B6F" />
								</Button>
								<Button x:Name="NextPageButton"
										Classes="flat"
										Width="32"
										Height="32"
										ToolTip.Tip="{l:Localize NextPage}">
									<avalonia:MaterialIcon Kind="ChevronRight" Width="16" Height="16" Foreground="#6A6B6F" />
								</Button>
								<Button x:Name="LastPageButton"
										Classes="flat"
										Width="32"
										Height="32"
										ToolTip.Tip="{l:Localize LastPage}">
									<avalonia:MaterialIcon Kind="ChevronDoubleRight" Width="16" Height="16" Foreground="#6A6B6F" />
								</Button>
							</StackPanel>

							<!-- Right side - Page size selector -->
							<StackPanel Grid.Column="2"
										Orientation="Horizontal"
										Spacing="8"
										HorizontalAlignment="Right"
										VerticalAlignment="Center"
										MinHeight="28">
								<TextBlock Text="{l:Localize ItemsPerPage}"
						   FontSize="12"
						   Foreground="#6A6B6F"
						   VerticalAlignment="Center" />
								<ComboBox x:Name="PageSizeComboBox"
                                          Width="60"
                                          Height="28"
                                          Background="#FFFFFF"
                                          BorderBrush="#DBDBDB"
                                          BorderThickness="0.97"
                                          Foreground="#1A1C1E"
                                          SelectedIndex="0">
									<ComboBox.Template>
										<ControlTemplate TargetType="ComboBox">
											<Grid>
												<ToggleButton Name="PART_ToggleButton"
															  Background="{TemplateBinding Background}"
															  BorderBrush="{TemplateBinding BorderBrush}"
															  BorderThickness="{TemplateBinding BorderThickness}"
															  CornerRadius="8"
															  IsChecked="{TemplateBinding IsDropDownOpen, Mode=TwoWay}"
															  ClickMode="Press">
													<ToggleButton.Template>
														<ControlTemplate TargetType="ToggleButton">
															<Border Background="{TemplateBinding Background}"
																	BorderBrush="{TemplateBinding BorderBrush}"
																	BorderThickness="{TemplateBinding BorderThickness}"
																	CornerRadius="{TemplateBinding CornerRadius}">
																<Grid ColumnDefinitions="*,Auto">
																	<ContentPresenter Grid.Column="0"
																					  Margin="8,0,0,0"
																					  VerticalAlignment="Center"
																					  HorizontalAlignment="Left"
																					  Content="{Binding $parent[ComboBox].SelectionBoxItem}"
																					  ContentTemplate="{Binding $parent[ComboBox].ItemTemplate}" />

																	<Border Grid.Column="1"
																			Width="24"
																			Background="Transparent">
																		<Path Width="8" Height="6"
																			  HorizontalAlignment="Center"
																			  VerticalAlignment="Center"
																			  Data="M0,0 L4,4 L8,0 Z"
																			  Fill="{Binding $parent[ComboBox].Foreground}" />
																	</Border>
																</Grid>
															</Border>
														</ControlTemplate>
													</ToggleButton.Template>
												</ToggleButton>

												<Popup Name="PART_Popup"
													   PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}"
													   IsOpen="{TemplateBinding IsDropDownOpen, Mode=TwoWay}"
													   MinWidth="{Binding Bounds.Width, RelativeSource={RelativeSource TemplatedParent}}"
													   MaxHeight="200">
													<Border Background="White"
															BorderBrush="#DBDBDB"
															BorderThickness="1"
															CornerRadius="8"
															BoxShadow="0 4 16 0 #19000000">
														<ScrollViewer>
															<ItemsPresenter Name="PART_ItemsPresenter" />
														</ScrollViewer>
													</Border>
												</Popup>
											</Grid>
										</ControlTemplate>
									</ComboBox.Template>

									<ComboBox.Styles>
										<Style Selector="ComboBoxItem">
											<Setter Property="Padding" Value="8,6" />
											<Setter Property="FontSize" Value="13" />
											<Setter Property="Background" Value="Transparent" />
										</Style>
										<Style Selector="ComboBoxItem:pointerover">
											<Setter Property="Background" Value="#F5F5F5" />
										</Style>
										<Style Selector="ComboBoxItem:selected">
											<Setter Property="Background" Value="#E3F2FD" />
										</Style>
									</ComboBox.Styles>

									<ComboBoxItem Content="10" />
									<ComboBoxItem Content="25" />
									<ComboBoxItem Content="50" />
									<ComboBoxItem Content="100" />
								</ComboBox>
							</StackPanel>
						</Grid>
					</Border>
					<ProgressBar x:Name="ExportSpinner"
			                     VerticalAlignment="Center"
			                     HorizontalAlignment="Stretch"
			                     IsIndeterminate="True"
			                     IsVisible="False" />
				</Grid>
				<Border x:Name="ChatPanel" Margin="20" IsVisible="False">
					<Grid RowDefinitions="Auto,*">
						<Grid Grid.Row="0" ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto" Margin="0,0,0,40">
							<TextBlock x:Name="ChatTitleTextBlock" Grid.Row="0" Grid.Column="0"
                                       Foreground="#6A6B6F" FontWeight="400" FontSize="16"
                                       VerticalAlignment="Center" />
							<Button Grid.Row="0" Grid.Column="1"
                                    x:Name="ChatOptionsButton"
                                    Classes="flat"
                                    FontSize="16"
                                    Width="42"
                                    Height="42"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Top"
                                    BorderBrush="Transparent"
                                    BorderThickness="0"
                                    Click="ChatOptionsButton_Click">
								<avalonia:MaterialIcon Kind="DotsHorizontal"
                                                       Foreground="#A6A6A8"
                                                       Background="Transparent"
                                                       Width="20"
                                                       Height="20"
                                                       VerticalAlignment="Top" />
								<Button.ContextMenu>
									<ContextMenu>
										<MenuItem Header="{l:Localize Clear}" x:Name="ClearMenuItem" Click="ClearChat_Click" />
										<MenuItem Header="{l:Localize Download}" x:Name="DownloadMenuItem"
                                                  Click="DownloadChat_Click" />
									</ContextMenu>
								</Button.ContextMenu>
							</Button>
							<Border Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
                                    BorderThickness="0,0,0,1" BorderBrush="#EAECF0" />
						</Grid>
						<Grid Grid.Row="1" RowDefinitions="*,Auto">
							<ScrollViewer x:Name="ChatScrollViewer"
                                          Grid.Row="0"
                                          VerticalScrollBarVisibility="Auto"
                                          HorizontalScrollBarVisibility="Disabled">
								<StackPanel x:Name="ConversationContainer"
                                            Spacing="5"
                                            VerticalAlignment="Top" />
							</ScrollViewer>
							<Grid Grid.Row="0" Grid.RowSpan="2"
                                  IsVisible="{Binding !Children.Count, ElementName=ConversationContainer}"
                                  VerticalAlignment="Center"
                                  HorizontalAlignment="Center"
                                  Margin="0,-100,0,0">
								<StackPanel Spacing="10">
									<TextBlock x:Name="ChatPlaceholder"
                                               Text="{l:Localize WhatDoYouWantToChatAbout}"
                                               FontSize="28"
										       FontWeight="Bold"
                                               Foreground="#1A1C1E"
                                               HorizontalAlignment="Center"
                                               Margin="0,0,0,20" />
									<StackPanel x:Name="EmptyChatInputContainer"
                                                Orientation="Horizontal"
                                                HorizontalAlignment="Center">
										<Grid Width="610">
											<TextBox x:Name="EmptyChatInputBox"
                                                     Classes="no-shadow"
                                                     Watermark="{l:Localize EnterUserMessage}"
                                                     AcceptsReturn="False"
                                                     Background="White"
                                                     BorderBrush="#DBDBDB"
                                                     BorderThickness="1"
                                                     CornerRadius="12"
                                                     Padding="20,10,48,10"
                                                     Height="56"
													 FontSize="14"
                                                     KeyDown="ChatInputBox_KeyDown" />
											<Button x:Name="EmptyInlineSendButton"
                                                    Background="#0472EF"
                                                    BorderThickness="0"
                                                    Margin="0,0,10,0"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Center"
                                                    Height="32"
                                                    Width="32"
                                                    CornerRadius="8"
                                                    Click="SendMessageTest_Click">
												<avalonia:MaterialIcon Kind="SendOutline"
                                                                       Foreground="#FFFFFF"
                                                                       Height="20"
                                                                       Width="20" />
											</Button>
										</Grid>
									</StackPanel>
								</StackPanel>
							</Grid>
							<StackPanel x:Name="ChatInputContainer"
                                        Grid.Row="1"
                                        Orientation="Horizontal"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Bottom"
                                        Margin="0,10,0,46"
                                        IsVisible="{Binding Children.Count, ElementName=ConversationContainer}">
								<Grid Width="610">
									<TextBox x:Name="ChatInputBox"
                                             Classes="no-shadow"
                                             Watermark="{l:Localize EnterUserMessage}"
                                             AcceptsReturn="False"
                                             Background="White"
                                             BorderBrush="#DBDBDB"
                                             BorderThickness="1"
                                             CornerRadius="8"
                                             Padding="16,8,40,8"
                                             Height="48"
                                             KeyDown="ChatInputBox_KeyDown" />
									<Button x:Name="InlineSendButton"
                                            Background="#0472EF"
                                            BorderThickness="0"
                                            Margin="0,0,10,0"
                                            HorizontalAlignment="Right"
                                            VerticalAlignment="Center"
                                            Height="32"
                                            Width="32"
                                            CornerRadius="8"
                                            Click="SendMessageTest_Click">
										<avalonia:MaterialIcon Kind="SendOutline"
                                                               Foreground="#FFFFFF"
                                                               Background="#0472EF" />
									</Button>
								</Grid>
							</StackPanel>
						</Grid>
					</Grid>
				</Border>
				<TextBlock Name="WorkspaceText" IsVisible="False" />
			</Grid>
		</DockPanel>
		<GridSplitter Grid.Row="1" Height="5" HorizontalAlignment="Stretch" Background="#DDDDDD" />
		<!-- Console panel -->
		<Border Grid.Row="2" x:Name="ConsolePanel" Background="#000000" BorderBrush="#1E1E1E" BorderThickness="1"
                IsVisible="False">
			<StackPanel Orientation="Vertical" Spacing="10" Margin="0">
				<DockPanel Background="#333333">
					<Button Classes="console" HorizontalAlignment="Right" DockPanel.Dock="Right"
                            Click="CloseConsoleButton_Click">
						<avalonia:MaterialIcon Kind="Close" />
					</Button>
					<Button Classes="console" HorizontalAlignment="Right" DockPanel.Dock="Right"
                            Click="ClearConsoleButton_Click" Margin="0,0,5,0" ToolTip.Tip="{l:Localize ClearConsoleTooltip}">
						<avalonia:MaterialIcon Kind="DeleteOutline" />
					</Button>
					<Button Classes="console" HorizontalAlignment="Right" DockPanel.Dock="Right"
                            Click="DownloadConsoleLogsButton_Click" Margin="0,0,5,0" ToolTip.Tip="{l:Localize DownloadLogsTooltip}">
						<avalonia:MaterialIcon Kind="Download" />
					</Button>
					<Button x:Name="CopyConsoleButton" Classes="console" HorizontalAlignment="Right" DockPanel.Dock="Right"
                            Click="CopyConsoleButton_Click" Margin="0,0,5,0" ToolTip.Tip="Copy All Logs">
						<avalonia:MaterialIcon x:Name="CopyConsoleIcon" Kind="ContentCopy" />
					</Button>
				</DockPanel>
				<ScrollViewer VerticalScrollBarVisibility="Auto" Height="200" Background="Transparent">
					<SelectableTextBlock x:Name="ConsoleOutputTextBox"
                                         IsHitTestVisible="True"
                                         IsTabStop="False"
                                         TextWrapping="Wrap"
                                         Background="#000000"
                                         Foreground="#FFFFFF"
                                         FontFamily="Consolas, Courier New, Monospace"
                                         Padding="5" />

				</ScrollViewer>
			</StackPanel>
		</Border>
		<!-- ReSharper disable Xaml.MissingGridIndex -->
		<WindowNotificationManager x:Name="NotificationManager" />
		<!-- ReSharper restore Xaml.MissingGridIndex -->
	</Grid>
	<!-- ReSharper restore Xaml.StyleClassNotFound -->
	<!-- ReSharper restore ObsoleteElement -->
</Window>